行，**123 一次性给你**：

* **1）合约 v0（Base 主网可部署）**
* **2）前端 Buy YES/NO + 概率组件（按你仓库结构可直接加文件）**
* **3）Cursor / Claude Code 专用“自动改造指令”**

> 说明：合约 v0 我用 **“主网最稳的 Demo 版”**：类似“二元资金池/赛马分彩池（Pari-mutuel）”。
> 买入会推动概率（YES/NO 占比），结算后赢家按比例分 pot。
> 你后面要换 LMSR/LS-AMM，只需要替换 `quote()` 和 `buy()` 计算模块，不影响 UI/路由/订单流。

---

# 1) 合约 v0（Base 主网 Demo 可部署）

## 1.1 Solidity：`LiqPassBinaryMarket.sol`（单文件可用）

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

/**
 * LiqPass Binary Market v0 (Pari-mutuel)
 * - USDC collateral (Base mainnet)
 * - Buy YES/NO with caps
 * - Resolver resolves outcome
 * - Winners claim pro-rata from pot
 *
 * Safety:
 * - cap per market
 * - max per user
 * - fee bps
 * - pause
 */

interface IERC20 {
  function transfer(address to, uint256 amt) external returns (bool);
  function transferFrom(address from, address to, uint256 amt) external returns (bool);
  function balanceOf(address a) external view returns (uint256);
  function decimals() external view returns (uint8);
}

abstract contract ReentrancyGuard {
  uint256 private _locked = 1;
  modifier nonReentrant() {
    require(_locked == 1, "REENTRANT");
    _locked = 2;
    _;
    _locked = 1;
  }
}

abstract contract Ownable {
  address public owner;
  event OwnershipTransferred(address indexed prev, address indexed next);
  constructor() { owner = msg.sender; emit OwnershipTransferred(address(0), msg.sender); }
  modifier onlyOwner() { require(msg.sender == owner, "ONLY_OWNER"); _; }
  function transferOwnership(address next) external onlyOwner {
    require(next != address(0), "BAD_OWNER");
    emit OwnershipTransferred(owner, next);
    owner = next;
  }
}

contract LiqPassBinaryMarket is Ownable, ReentrancyGuard {
  IERC20 public immutable usdc;

  // Config
  uint256 public feeBps;                 // e.g. 100 = 1%
  address public feeRecipient;
  address public resolver;               // can resolve outcome
  bool public paused;

  // Market
  uint256 public cap;                    // max total stake (USDC 6 decimals)
  uint256 public maxPerUser;             // max stake per user total (YES+NO)
  uint256 public totalYes;
  uint256 public totalNo;

  bool public resolved;
  bool public outcomeYes;

  mapping(address => uint256) public yesOf;
  mapping(address => uint256) public noOf;
  mapping(address => bool) public claimed;

  event Bought(address indexed user, bool yes, uint256 amountIn, uint256 fee, uint256 newTotalYes, uint256 newTotalNo);
  event Resolved(bool outcomeYes);
  event Claimed(address indexed user, uint256 payout);
  event Paused(bool v);
  event ConfigUpdated(uint256 feeBps, address feeRecipient, address resolver, uint256 cap, uint256 maxPerUser);

  modifier notPaused() { require(!paused, "PAUSED"); _; }
  modifier onlyResolver() { require(msg.sender == resolver, "ONLY_RESOLVER"); _; }

  constructor(
    address usdc_,
    uint256 feeBps_,
    address feeRecipient_,
    address resolver_,
    uint256 cap_,
    uint256 maxPerUser_
  ) {
    require(usdc_ != address(0), "BAD_USDC");
    require(feeRecipient_ != address(0), "BAD_FEE_RECIP");
    require(resolver_ != address(0), "BAD_RESOLVER");
    require(feeBps_ <= 500, "FEE_TOO_HIGH"); // <=5% for demo safety
    usdc = IERC20(usdc_);
    feeBps = feeBps_;
    feeRecipient = feeRecipient_;
    resolver = resolver_;
    cap = cap_;
    maxPerUser = maxPerUser_;

    emit ConfigUpdated(feeBps_, feeRecipient_, resolver_, cap_, maxPerUser_);
  }

  // ---------------------------
  // View helpers
  // ---------------------------

  function pot() public view returns (uint256) {
    return totalYes + totalNo;
  }

  // Probability in 1e6 (for UI): pYes = totalYes/(totalYes+totalNo)
  function pYes1e6() public view returns (uint256) {
    uint256 p = pot();
    if (p == 0) return 500_000;
    return (totalYes * 1_000_000) / p;
  }

  function userTotal(address u) public view returns (uint256) {
    return yesOf[u] + noOf[u];
  }

  // ---------------------------
  // Admin
  // ---------------------------

  function setPaused(bool v) external onlyOwner {
    paused = v;
    emit Paused(v);
  }

  function setConfig(
    uint256 feeBps_,
    address feeRecipient_,
    address resolver_,
    uint256 cap_,
    uint256 maxPerUser_
  ) external onlyOwner {
    require(feeRecipient_ != address(0), "BAD_FEE_RECIP");
    require(resolver_ != address(0), "BAD_RESOLVER");
    require(feeBps_ <= 500, "FEE_TOO_HIGH");
    feeBps = feeBps_;
    feeRecipient = feeRecipient_;
    resolver = resolver_;
    cap = cap_;
    maxPerUser = maxPerUser_;
    emit ConfigUpdated(feeBps_, feeRecipient_, resolver_, cap_, maxPerUser_);
  }

  // ---------------------------
  // Trading
  // ---------------------------

  function buyYes(uint256 amount) external nonReentrant notPaused {
    _buy(true, amount);
  }

  function buyNo(uint256 amount) external nonReentrant notPaused {
    _buy(false, amount);
  }

  function _buy(bool yes, uint256 amount) internal {
    require(!resolved, "RESOLVED");
    require(amount > 0, "ZERO");
    require(pot() + amount <= cap, "CAP");

    uint256 newUserTotal = userTotal(msg.sender) + amount;
    require(newUserTotal <= maxPerUser, "USER_CAP");

    // fee
    uint256 fee = (amount * feeBps) / 10_000;
    uint256 net = amount - fee;

    // pull USDC
    require(usdc.transferFrom(msg.sender, address(this), amount), "TRANSFER_FROM_FAIL");
    if (fee > 0) {
      require(usdc.transfer(feeRecipient, fee), "FEE_TRANSFER_FAIL");
    }

    if (yes) {
      yesOf[msg.sender] += net;
      totalYes += net;
    } else {
      noOf[msg.sender] += net;
      totalNo += net;
    }

    emit Bought(msg.sender, yes, amount, fee, totalYes, totalNo);
  }

  // ---------------------------
  // Resolve & Claim
  // ---------------------------

  function resolve(bool outcomeYes_) external onlyResolver {
    require(!resolved, "ALREADY");
    resolved = true;
    outcomeYes = outcomeYes_;
    emit Resolved(outcomeYes_);
  }

  function claim() external nonReentrant {
    require(resolved, "NOT_RESOLVED");
    require(!claimed[msg.sender], "CLAIMED");
    claimed[msg.sender] = true;

    uint256 p = pot();
    if (p == 0) {
      emit Claimed(msg.sender, 0);
      return;
    }

    uint256 userWin = outcomeYes ? yesOf[msg.sender] : noOf[msg.sender];
    uint256 totalWin = outcomeYes ? totalYes : totalNo;

    if (userWin == 0 || totalWin == 0) {
      emit Claimed(msg.sender, 0);
      return;
    }

    // payout = userWin / totalWin * pot
    uint256 payout = (userWin * p) / totalWin;

    require(usdc.transfer(msg.sender, payout), "PAYOUT_FAIL");
    emit Claimed(msg.sender, payout);
  }

  // Emergency: owner can pull mistakenly sent tokens when paused & not resolved
  function emergencyWithdraw(address token, address to, uint256 amt) external onlyOwner {
    require(paused, "NOT_PAUSED");
    require(!resolved, "RESOLVED");
    require(to != address(0), "BAD_TO");
    IERC20(token).transfer(to, amt);
  }
}
```

## 1.2 Base 主网 USDC 地址（你直接用）

* Base USDC：`0x833589fCD6eDb6E08f4c7C32D4f71b54bDa02913`

## 1.3 Demo 推荐部署参数（安全收口版）

* `feeBps = 100`（1%）
* `cap = 500e6`（500 USDC，USDC 6 位）
* `maxPerUser = 20e6`（20 USDC）
* `feeRecipient = 你的 EOA`
* `resolver = 你的 EOA`（之后改成多签）

---

# 2) 前端（按你项目结构直接加文件即可）

你项目已经有 wagmi+RainbowKit（Base 8453），所以只要新增 **MarketDemo 页面 + 3 个组件**。

> 你现在 accelerator 里已有 `OneDollarProjectPage.tsx`（项目详情）和 routes。
> 我给你一个 **独立页面** `/accelerator/market/:id`，先把 Demo 跑通。
> 后续你想把 Buy 面板嵌回 `OneDollarProjectPage` 也很容易。

---

## 2.1 新增：`src/domains/accelerator/pages/MarketDemoPage.tsx`

```tsx
import React, { useMemo, useState } from 'react'
import { useParams, useNavigate } from 'react-router-dom'
import { ArrowLeft } from 'lucide-react'
import { useAccount } from 'wagmi'
import ProbabilityBar from '../../../components/features/MarketDemo/ProbabilityBar'
import BuyYesNoPanel from '../../../components/features/MarketDemo/BuyYesNoPanel'
import ResolvePanel from '../../../components/features/MarketDemo/ResolvePanel'

const MarketDemoPage: React.FC = () => {
  const { id } = useParams<{ id: string }>()
  const navigate = useNavigate()
  const { address } = useAccount()

  const marketAddress = useMemo(() => {
    // Demo：先用 env 配置一个 market 地址
    // 你也可以在这里根据 id 映射不同 market 地址
    return (import.meta.env.VITE_DEMO_MARKET_ADDRESS as `0x${string}`) || '0x0000000000000000000000000000000000000000'
  }, [id])

  const resolverAddress = (import.meta.env.VITE_DEMO_RESOLVER as `0x${string}`) || '0x0000000000000000000000000000000000000000'
  const isResolver = !!address && !!resolverAddress && address.toLowerCase() === resolverAddress.toLowerCase()

  return (
    <div className='min-h-screen bg-stripe-50 text-stripe-900'>
      <div className='bg-white border-b border-gray-200 sticky top-0 z-40'>
        <div className='max-w-5xl mx-auto px-4 py-3 flex items-center justify-between'>
          <button
            onClick={() => navigate(-1)}
            className='flex items-center gap-2 text-sm font-bold text-stripe-600 hover:text-stripe-900'
          >
            <ArrowLeft className='w-4 h-4' />
            返回
          </button>

          <div className='text-sm font-black'>
            Market Demo <span className='text-stripe-500'>#{id}</span>
          </div>

          <div className='text-xs font-bold px-2 py-1 rounded-full border bg-gray-50 text-gray-700'>
            Base Mainnet
          </div>
        </div>
      </div>

      <div className='max-w-5xl mx-auto px-4 py-6 grid grid-cols-1 lg:grid-cols-3 gap-4'>
        <div className='lg:col-span-2'>
          <div className='card p-5'>
            <div className='text-lg font-black mb-2'>概率</div>
            <ProbabilityBar marketAddress={marketAddress} />
            <div className='mt-4 text-sm text-stripe-600'>
              这个 Demo 是「买入推动概率，占比即市场共识」。结算后赢家按比例分 pot。
            </div>
          </div>

          <div className='card p-5 mt-4'>
            <div className='text-lg font-black mb-3'>下单</div>
            <BuyYesNoPanel marketAddress={marketAddress} />
          </div>

          {isResolver && (
            <div className='card p-5 mt-4 border border-yellow-200 bg-yellow-50'>
              <div className='text-lg font-black mb-3'>Resolver 控制台</div>
              <ResolvePanel marketAddress={marketAddress} />
            </div>
          )}
        </div>

        <div className='lg:col-span-1'>
          <div className='card p-5'>
            <div className='text-sm font-black mb-2'>Demo 提示</div>
            <ul className='text-sm text-stripe-700 space-y-2'>
              <li>• 先小额：1/5/10 USDC</li>
              <li>• 结算：Resolver 手动点 Resolve</li>
              <li>• 领奖：Resolve 后点 Claim</li>
            </ul>
          </div>

          <div className='card p-5 mt-4'>
            <div className='text-sm font-black mb-2'>环境变量</div>
            <div className='text-xs text-stripe-600 space-y-1'>
              <div>VITE_DEMO_MARKET_ADDRESS</div>
              <div>VITE_DEMO_RESOLVER</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default MarketDemoPage
```

---

## 2.2 新增：`src/components/features/MarketDemo/abi.ts`

```ts
export const DEMO_MARKET_ABI = [
  { type: 'function', name: 'pYes1e6', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'totalYes', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'totalNo', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'cap', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'maxPerUser', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'resolved', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'bool' }] },
  { type: 'function', name: 'outcomeYes', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'bool' }] },

  { type: 'function', name: 'buyYes', stateMutability: 'nonpayable', inputs: [{ name: 'amount', type: 'uint256' }], outputs: [] },
  { type: 'function', name: 'buyNo', stateMutability: 'nonpayable', inputs: [{ name: 'amount', type: 'uint256' }], outputs: [] },
  { type: 'function', name: 'claim', stateMutability: 'nonpayable', inputs: [], outputs: [] },
  { type: 'function', name: 'resolve', stateMutability: 'nonpayable', inputs: [{ name: 'outcomeYes_', type: 'bool' }], outputs: [] },
] as const

export const ERC20_ABI = [
  { type: 'function', name: 'approve', stateMutability: 'nonpayable', inputs: [{ name: 'spender', type: 'address' }, { name: 'amount', type: 'uint256' }], outputs: [{ name: '', type: 'bool' }] },
  { type: 'function', name: 'allowance', stateMutability: 'view', inputs: [{ name: 'owner', type: 'address' }, { name: 'spender', type: 'address' }], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'balanceOf', stateMutability: 'view', inputs: [{ name: 'a', type: 'address' }], outputs: [{ name: '', type: 'uint256' }] },
  { type: 'function', name: 'decimals', stateMutability: 'view', inputs: [], outputs: [{ name: '', type: 'uint8' }] },
] as const

export const BASE_USDC = '0x833589fCD6eDb6E08f4c7C32D4f71b54bDa02913' as const
```

---

## 2.3 新增：`src/components/features/MarketDemo/ProbabilityBar.tsx`

```tsx
import React from 'react'
import { useReadContract } from 'wagmi'
import { DEMO_MARKET_ABI } from './abi'

function clamp(n: number, a: number, b: number) {
  return Math.max(a, Math.min(b, n))
}

const ProbabilityBar: React.FC<{ marketAddress: `0x${string}` }> = ({ marketAddress }) => {
  const { data: pYes1e6 } = useReadContract({
    address: marketAddress,
    abi: DEMO_MARKET_ABI,
    functionName: 'pYes1e6',
    query: { refetchInterval: 1500 },
  })

  const p = typeof pYes1e6 === 'bigint' ? Number(pYes1e6) / 1_000_000 : 0.5
  const pct = clamp(Math.round(p * 100), 0, 100)

  return (
    <div className='mt-2'>
      <div className='flex items-center justify-between text-sm font-bold'>
        <div className='text-green-700'>YES {pct}%</div>
        <div className='text-red-700'>NO {100 - pct}%</div>
      </div>

      <div className='mt-2 h-3 w-full rounded-full bg-gray-100 overflow-hidden border border-gray-200'>
        <div className='h-full bg-green-500' style={{ width: `${pct}%` }} />
      </div>

      <div className='mt-2 text-xs text-stripe-500'>
        解释：p(YES)=YES 资金占比。买入会即时推动该占比（Demo v0）。
      </div>
    </div>
  )
}

export default ProbabilityBar
```

---

## 2.4 新增：`src/components/features/MarketDemo/BuyYesNoPanel.tsx`

```tsx
import React, { useMemo, useState } from 'react'
import { useAccount, useReadContract, useWriteContract, useWaitForTransactionReceipt } from 'wagmi'
import { parseUnits } from 'viem'
import { BASE_USDC, DEMO_MARKET_ABI, ERC20_ABI } from './abi'

const QUICK = [1, 5, 10, 20]

const BuyYesNoPanel: React.FC<{ marketAddress: `0x${string}` }> = ({ marketAddress }) => {
  const { address } = useAccount()
  const [side, setSide] = useState<'yes' | 'no'>('yes')
  const [amt, setAmt] = useState<string>('5')

  const amount6 = useMemo(() => {
    const n = Number(amt || '0')
    if (!Number.isFinite(n) || n <= 0) return 0n
    return parseUnits(String(n), 6)
  }, [amt])

  const { data: allowance } = useReadContract({
    address: BASE_USDC,
    abi: ERC20_ABI,
    functionName: 'allowance',
    args: address ? [address, marketAddress] : undefined,
    query: { enabled: !!address && marketAddress !== '0x0000000000000000000000000000000000000000' },
  })

  const needApprove = typeof allowance === 'bigint' ? allowance < amount6 : true

  const {
    writeContract: writeApprove,
    data: approveHash,
    isPending: approving,
  } = useWriteContract()

  const {
    writeContract: writeBuy,
    data: buyHash,
    isPending: buying,
  } = useWriteContract()

  const { isLoading: approveMining } = useWaitForTransactionReceipt({ hash: approveHash })
  const { isLoading: buyMining } = useWaitForTransactionReceipt({ hash: buyHash })

  const busy = approving || buying || approveMining || buyMining

  const doApprove = () => {
    if (!amount6) return
    writeApprove({
      address: BASE_USDC,
      abi: ERC20_ABI,
      functionName: 'approve',
      args: [marketAddress, amount6],
    })
  }

  const doBuy = () => {
    if (!amount6) return
    writeBuy({
      address: marketAddress,
      abi: DEMO_MARKET_ABI,
      functionName: side === 'yes' ? 'buyYes' : 'buyNo',
      args: [amount6],
    })
  }

  return (
    <div>
      <div className='flex gap-2'>
        <button
          className={`flex-1 px-3 py-2 rounded-xl text-sm font-black border ${side === 'yes' ? 'bg-green-50 border-green-200 text-green-800' : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-50'}`}
          onClick={() => setSide('yes')}
        >
          BUY YES
        </button>
        <button
          className={`flex-1 px-3 py-2 rounded-xl text-sm font-black border ${side === 'no' ? 'bg-red-50 border-red-200 text-red-800' : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-50'}`}
          onClick={() => setSide('no')}
        >
          BUY NO
        </button>
      </div>

      <div className='mt-3 flex items-center gap-2'>
        <input
          value={amt}
          onChange={e => setAmt(e.target.value)}
          className='w-32 px-3 py-2 rounded-xl border border-gray-200 bg-white text-sm font-bold'
          placeholder='USDC'
          inputMode='decimal'
        />
        <div className='flex gap-2 flex-wrap'>
          {QUICK.map(q => (
            <button
              key={q}
              onClick={() => setAmt(String(q))}
              className='px-2.5 py-1.5 rounded-full text-xs font-bold border border-gray-200 bg-white hover:bg-gray-50'
            >
              {q}
            </button>
          ))}
        </div>
      </div>

      <div className='mt-4 flex gap-2'>
        {needApprove ? (
          <button
            disabled={!address || busy || amount6 === 0n}
            onClick={doApprove}
            className='flex-1 px-3 py-2 rounded-xl bg-stripe-900 text-white text-sm font-black disabled:opacity-50'
          >
            {busy ? '处理中…' : 'Approve USDC'}
          </button>
        ) : (
          <button
            disabled={!address || busy || amount6 === 0n}
            onClick={doBuy}
            className='flex-1 px-3 py-2 rounded-xl bg-stripe-900 text-white text-sm font-black disabled:opacity-50'
          >
            {busy ? '处理中…' : `Confirm ${side.toUpperCase()}`}
          </button>
        )}
      </div>

      <div className='mt-3 text-xs text-stripe-500'>
        Demo v0：买入后资金进入 YES/NO 池；Resolver 结算后赢家按比例 Claim。
      </div>
    </div>
  )
}

export default BuyYesNoPanel
```

---

## 2.5 新增：`src/components/features/MarketDemo/ResolvePanel.tsx`

```tsx
import React from 'react'
import { useReadContract, useWriteContract, useWaitForTransactionReceipt } from 'wagmi'
import { DEMO_MARKET_ABI } from './abi'

const ResolvePanel: React.FC<{ marketAddress: `0x${string}` }> = ({ marketAddress }) => {
  const { data: resolved } = useReadContract({
    address: marketAddress,
    abi: DEMO_MARKET_ABI,
    functionName: 'resolved',
    query: { refetchInterval: 1500 },
  })

  const { writeContract, data: hash, isPending } = useWriteContract()
  const { isLoading: mining } = useWaitForTransactionReceipt({ hash })

  const busy = isPending || mining
  const isResolved = !!resolved

  const resolveYes = () => writeContract({ address: marketAddress, abi: DEMO_MARKET_ABI, functionName: 'resolve', args: [true] })
  const resolveNo = () => writeContract({ address: marketAddress, abi: DEMO_MARKET_ABI, functionName: 'resolve', args: [false] })
  const claim = () => writeContract({ address: marketAddress, abi: DEMO_MARKET_ABI, functionName: 'claim', args: [] })

  return (
    <div className='space-y-2'>
      <div className='text-xs font-bold text-stripe-600'>
        状态：{isResolved ? '已结算' : '未结算'}
      </div>

      {!isResolved ? (
        <div className='flex gap-2'>
          <button
            disabled={busy}
            onClick={resolveYes}
            className='flex-1 px-3 py-2 rounded-xl bg-green-600 text-white text-sm font-black disabled:opacity-50'
          >
            {busy ? '处理中…' : 'Resolve YES'}
          </button>
          <button
            disabled={busy}
            onClick={resolveNo}
            className='flex-1 px-3 py-2 rounded-xl bg-red-600 text-white text-sm font-black disabled:opacity-50'
          >
            {busy ? '处理中…' : 'Resolve NO'}
          </button>
        </div>
      ) : (
        <button
          disabled={busy}
          onClick={claim}
          className='w-full px-3 py-2 rounded-xl bg-stripe-900 text-white text-sm font-black disabled:opacity-50'
        >
          {busy ? '处理中…' : 'Claim (测试领奖)'}
        </button>
      )}

      <div className='text-xs text-stripe-600'>
        Resolver 仅用于 Demo。后面你可以换多签/可审计证据验证模块。
      </div>
    </div>
  )
}

export default ResolvePanel
```

---

## 2.6 路由接入：修改 `src/domains/accelerator/routes.ts`

在 imports 里加一行：

```ts
const MarketDemoPage = lazy(() => import('./pages/MarketDemoPage'))
```

在 routes 数组末尾加：

```ts
{
  path: '/accelerator/market/:id',
  element: createElement(MarketDemoPage),
},
```

---

## 2.7 `.env`（主网 Demo 必须加）

```env
VITE_DEMO_MARKET_ADDRESS=0xYourDeployedMarket
VITE_DEMO_RESOLVER=0xYourEOAResolver
```

---

# 3) Cursor / Claude Code “自动改造指令”（直接复制）

把下面整段丢给你的 AI Coding 工具，它会自动改：

```text
目标：在现有 Vite+React+TS 项目中新增 Base 主网 Market Demo（YES/NO 买入 + 概率条 + Resolver 结算）。
约束：不改现有模块结构，只新增文件并改 accelerator/routes.ts；不引入新依赖（已存在 wagmi/rainbowkit/viem）。

请执行：
1) 新增文件：
- src/domains/accelerator/pages/MarketDemoPage.tsx
- src/components/features/MarketDemo/abi.ts
- src/components/features/MarketDemo/ProbabilityBar.tsx
- src/components/features/MarketDemo/BuyYesNoPanel.tsx
- src/components/features/MarketDemo/ResolvePanel.tsx

文件内容使用我提供的代码（逐字复制）。

2) 修改 src/domains/accelerator/routes.ts：
- 添加 lazy import: MarketDemoPage
- 添加 route: /accelerator/market/:id

3) 确保 TS 编译通过：
- 所有新增文件使用默认导出或命名导出一致
- marketAddress 类型使用 `0x${string}`

4) 提醒我在 .env 添加：
VITE_DEMO_MARKET_ADDRESS=...
VITE_DEMO_RESOLVER=...

完成后告诉我：
- 新增了哪些文件
- routes.ts 增加了哪一段
- 我应该访问哪个 URL 验证（例如 /accelerator/market/1）
```

---

## 你现在下一步怎么做（最短路径）

1. 先把合约部署到 Base 主网（小 cap：500 USDC）
2. `.env` 填上 market 地址和 resolver 地址
3. 打开：`/accelerator/market/1`
4. 小额买入 -> Resolver 结算 -> Claim

如果你把 **你部署出来的 Market 合约地址** 发我，我可以顺手把：

* Board 卡片上直接加一个 “Trade” 按钮跳到 `/accelerator/market/:id`
* 或者把 Buy 面板直接嵌回你 `OneDollarProjectPage.tsx` 的里程碑区域（你之前想要的“阶段点击展开就能买”那套）
