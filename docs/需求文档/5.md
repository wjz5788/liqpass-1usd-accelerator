下面给你一套“全站统一钱包登录”落地方案（Vite + React Router + TS + Zustand），按文件复制粘贴就能用。目标：任何页面都用同一套 `WalletProvider + useWallet()`，Base 主网(8453) 校验，public RPC 走你给的。

---

## 0) 装依赖（一次）

```bash
npm i wagmi viem @tanstack/react-query
npm i @rainbow-me/rainbowkit
```

---

## 1) 新增：链与 wagmi 配置（Base 8453 + Public RPC）

### `src/wallet/chains.ts`

```ts
import { defineChain } from "viem";

export const base8453 = defineChain({
  id: 8453,
  name: "Base",
  network: "base",
  nativeCurrency: { name: "Ether", symbol: "ETH", decimals: 18 },
  rpcUrls: {
    default: { http: ["https://mainnet.base.org"] },
    public: { http: ["https://mainnet.base.org"] },
  },
  blockExplorers: {
    default: { name: "BaseScan", url: "https://basescan.org" },
  },
});
```

### `src/wallet/wagmi.ts`

```ts
import { getDefaultConfig } from "@rainbow-me/rainbowkit";
import { base8453 } from "./chains";

export const wagmiConfig = getDefaultConfig({
  appName: "LiqPass / 1USD Accelerator",
  projectId: "liqpass-demo", // RainbowKit 需要一个字符串；demo 就写死即可
  chains: [base8453],
  ssr: false,
});
```

---

## 2) 新增：全局 Provider（React Query + Wagmi + RainbowKit）

### `src/wallet/WalletProvider.tsx`

```tsx
import React, { PropsWithChildren } from "react";
import { WagmiProvider } from "wagmi";
import { RainbowKitProvider, lightTheme } from "@rainbow-me/rainbowkit";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { wagmiConfig } from "./wagmi";
import { base8453 } from "./chains";

import "@rainbow-me/rainbowkit/styles.css";

const queryClient = new QueryClient();

export function WalletProvider({ children }: PropsWithChildren) {
  return (
    <WagmiProvider config={wagmiConfig}>
      <QueryClientProvider client={queryClient}>
        <RainbowKitProvider
          chains={[base8453]}
          theme={lightTheme({
            borderRadius: "medium",
          })}
          modalSize="compact"
        >
          {children}
        </RainbowKitProvider>
      </QueryClientProvider>
    </WagmiProvider>
  );
}
```

---

## 3) 新增：统一 Wallet 状态（Zustand，给你全项目复用）

> 你后面会有“保险/比赛/选股/加速器”等多个域，这个 store 用来做统一入口与权限判断（是否连接、是否在 Base、地址等）。

### `src/store/walletStore.ts`

```ts
import { create } from "zustand";

type WalletState = {
  address?: `0x${string}`;
  chainId?: number;
  isConnected: boolean;
  setWallet: (p: { address?: `0x${string}`; chainId?: number; isConnected: boolean }) => void;
  reset: () => void;
};

export const useWalletStore = create<WalletState>((set) => ({
  address: undefined,
  chainId: undefined,
  isConnected: false,
  setWallet: (p) => set(p),
  reset: () => set({ address: undefined, chainId: undefined, isConnected: false }),
}));
```

### `src/wallet/useSyncWalletToStore.ts`

```ts
import { useEffect } from "react";
import { useAccount, useChainId } from "wagmi";
import { useWalletStore } from "@/store/walletStore";

export function useSyncWalletToStore() {
  const { address, isConnected } = useAccount();
  const chainId = useChainId();
  const setWallet = useWalletStore((s) => s.setWallet);

  useEffect(() => {
    setWallet({ address, chainId, isConnected });
  }, [address, chainId, isConnected, setWallet]);
}
```

---

## 4) 新增：统一入口按钮（全站任何地方可放）

### `src/wallet/WalletButton.tsx`

```tsx
import React from "react";
import { ConnectButton } from "@rainbow-me/rainbowkit";
import { useWalletStore } from "@/store/walletStore";

function shortAddr(a?: string) {
  if (!a) return "";
  return a.slice(0, 6) + "..." + a.slice(-4);
}

export function WalletButton() {
  const { chainId } = useWalletStore();
  const isWrongNetwork = !!chainId && chainId !== 8453;

  return (
    <ConnectButton.Custom>
      {({ account, chain, openAccountModal, openChainModal, openConnectModal, mounted }) => {
        const ready = mounted;
        const connected = ready && account && chain;

        if (!connected) {
          return (
            <button
              onClick={openConnectModal}
              className="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/15 text-sm"
            >
              Connect Wallet
            </button>
          );
        }

        if (isWrongNetwork) {
          return (
            <button
              onClick={openChainModal}
              className="px-3 py-2 rounded-lg bg-amber-500/15 hover:bg-amber-500/20 border border-amber-500/30 text-sm text-amber-200"
              title="Switch to Base (8453)"
            >
              Wrong Network
            </button>
          );
        }

        return (
          <div className="flex items-center gap-2">
            <button
              onClick={openChainModal}
              className="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/15 text-sm"
            >
              {chain?.name ?? "Network"}
            </button>
            <button
              onClick={openAccountModal}
              className="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/15 text-sm"
            >
              {shortAddr(account?.address)}
            </button>
          </div>
        );
      }}
    </ConnectButton.Custom>
  );
}
```

---

## 5) 在根入口挂 Provider + 同步 hook（关键：只做一次，全站生效）

### `src/main.tsx`（或你的入口文件）

把你现有的 `ReactDOM.createRoot(...).render(...)` 外层包一层 `WalletProvider`。

```tsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import { WalletProvider } from "@/wallet/WalletProvider";

import "./index.css";

ReactDOM.createRoot(document.getElementById("root")!).render(
  <React.StrictMode>
    <WalletProvider>
      <App />
    </WalletProvider>
  </React.StrictMode>
);
```

### `src/App.tsx`（任意你能放全局 hook 的地方）

```tsx
import React from "react";
import { useSyncWalletToStore } from "@/wallet/useSyncWalletToStore";
// ...你的 Router 等

export default function App() {
  useSyncWalletToStore();

  return (
    // 你原本的 Router / Layout
    <div className="min-h-screen">
      {/* ... */}
    </div>
  );
}
```

---

## 6) 把钱包入口放到“全站统一顶栏”或“详情页头部”

比如你现在的 TopBar/Header 组件里插：

```tsx
import { WalletButton } from "@/wallet/WalletButton";

export function TopBar() {
  return (
    <div className="flex items-center justify-between px-4 py-3">
      <div className="font-semibold">LiqPass</div>
      <WalletButton />
    </div>
  );
}
```

---

## 7) 给业务模块一个“统一校验工具”（以后写合约交互都用它）

### `src/wallet/guards.ts`

```ts
import { useWalletStore } from "@/store/walletStore";

export function assertBaseConnected() {
  const s = useWalletStore.getState();
  if (!s.isConnected || !s.address) throw new Error("WALLET_NOT_CONNECTED");
  if (s.chainId !== 8453) throw new Error("WRONG_NETWORK");
  return { address: s.address, chainId: s.chainId };
}
```

业务侧用法：

```ts
import { assertBaseConnected } from "@/wallet/guards";

export function buySomething() {
  const { address } = assertBaseConnected();
  // 然后再走合约调用
}
```

---

# 你现在立刻得到的效果

* ✅ 全项目任意页面：同一个 Connect 按钮、同一个账户弹窗、同一个网络切换
* ✅ Zustand 里有统一钱包状态（后面做“我的持仓/我的订单/我的票据/理赔记录”都直接用）
* ✅ Base 8453 强约束（错网就提示切换）
* ✅ demo 走 public RPC（`https://mainnet.base.org`），后面你要换自己的 RPC 只改 `chains.ts`

---

如果你把“你项目当前的 Header 组件路径（文件名）”丢我，我就按你现有布局把 `WalletButton` 精准塞到你指定位置（不改风格，只对齐你现在的 UI）。
