Below is the **English execution version**.
This is **what you hand directly to developers**. No interpretation needed.

---

# LiqPass V0 | Developer Execution Spec (Minimal, Runnable)

## 1. Product Scope (Fixed)

* Exchange: **OKX**
* Product: **24-Hour Liquidation Insurance**
* Mode: **Passive verification + semi-automatic + manual payout**
* Settlement cycle: **Once every 24 hours**
* Fund principle: **Do NOT keep large balances on-chain**

---

## 2. One-Sentence Logic

> User buys insurance → liquidation happens on OKX within 24h → user submits claim → system fetches OKX evidence → human approves → next-day payout.

---

## 3. User Flow (Frontend must support)

1. Connect wallet
2. Bind OKX **read-only API key**
3. Purchase “24h Liquidation Insurance” (USDC)
4. After liquidation, click **Submit Claim**
5. Wait for manual review result

---

## 4. Core Rules (Non-negotiable)

* Only **24-hour coverage**
* Only **OKX official API**
* No active polling
* No automatic payout
* One payout per policy maximum

---

## 5. Liquidation Verification Logic (Backend, fixed)

A claim is **eligible** if and only if:

* Policy status = `ACTIVE`
* Current time ∈ `[startAt, endAt]`
* OKX API response contains:

  * `liquidation` or `forced close` event
  * Event timestamp is within the 24h window

---

## 6. Policy (Insurance) Minimal Fields

```ts
policyId
buyerWallet
okxApiKeyId
symbol
startAt
endAt
premiumUSDC
payoutUSDC
status // ACTIVE | CLAIM_REQUESTED | APPROVED | REJECTED | PAID | EXPIRED
```

---

## 7. Claim Minimal Fields

```ts
claimId
policyId
okxRawResponse
canonicalJson
hash
fetchedAt
decision // PENDING | APPROVED | REJECTED
reviewer
reviewedAt
payoutTxHash
```

---

## 8. Backend API (Minimal Set)

* `POST /quote` → return premium + payout
* `POST /purchase` → create policy
* `POST /claim` → fetch OKX data, create claim (PENDING)
* `GET /admin/claims` → admin review list
* `POST /admin/claims/:id/approve`
* `POST /admin/claims/:id/reject`
* `POST /admin/payout/batch` → batch payout execution

---

## 9. Manual Review Rules (Admin Panel)

**Approve if and only if:**

1. Policy is within valid coverage window
2. OKX clearly records a liquidation event
3. Policy has not been paid before

Otherwise → Reject.

---

## 10. Payout & Fund Management Rules (Strict)

* ❌ No automatic payouts
* ✅ One batch payout per day
* ✅ Hot wallet holds only:

  * Today’s maximum expected payouts + buffer
* ✅ Reduce or empty hot wallet after payout
* ✅ Global daily payout cap enforced

---

## 11. On-Chain Responsibilities (Minimal)

* Receive USDC
* Transfer USDC
* Emit events
* Pause capability

**No on-chain validation, no order state, no verification logic**

---

## 12. Safety & Fallback

* Pause switch (global)
* Daily payout cap
* One-time payout per policy
* Claim & payout idempotency
* All approvals/rejections logged

---

## 13. Explicit Non-Goals (Prevent Over-Engineering)

* ❌ No multiple exchanges
* ❌ No multiple insurance products
* ❌ No automatic claims
* ❌ No OKX polling jobs
* ❌ No long-term on-chain balances

---

## 14. Acceptance Criteria (Definition of Done)

* Complete flow works:
  Purchase → Liquidation → Claim → Manual Review → Payout
* All steps auditable and replayable
* System can be paused at any moment

---

### One Sentence for Developers

> **This is a semi-manual insurance settlement system, not a fully automated protocol.
> Stability, safety, and control come first. Speed is secondary.**

If you want next steps, I can:

* Split this into **Frontend / Backend / Smart Contract task lists**
* Convert into **Jira / Linear tickets**
* Generate a **copy-ready README.md**

Just say the word.

行，你这个计划是对的：**先把保险做成“真能用、可审计、可控风险”的 V0**，立刻就能拿去媒体报道+比赛/奖金申请；同时把它**作为大项目的子模块**，吃到生态叙事红利。

下面我按“你花最少时间”的原则，给你一套**最短路径施工图**。

---

## A. 你的最短路径目标（V0 真实可用）

**V0 定义**：OKX + 24h 爆仓保 + 被动验证 + 人工放款 + 每日清账 + 钱包不长期存钱
**成功标准**：你能录屏演示一条完整闭环：
购买 → 爆仓 → 申请理赔 → 后台审核 → 批量放款 → 对账导出

---

## B. 你最少要补齐的 6 个“上线必需件”

这些缺一个就会“能跑但不敢赔 / 不敢收钱”。

1. **证据包固定格式**（claim JSON + hash）

* okxRawResponse + canonicalJson + hash + fetchedAt
* 目的：可审计、可复核、媒体也好讲

2. **幂等与防重复**（防被薅）

* policyId 只能 paid 一次
* claimId 幂等（重复点“申请理赔”返回同一条）

3. **后台审核面板**（最重要的运营工具）

* 列表：PENDING claims
* 按钮：Approve / Reject
* 批量：生成 payout batch

4. **每日清账 SOP**（别人能接手操作）

* 固定时间导出待审核 → 审核 → 批量放款 → 回填 txHash → 清空热钱包

5. **资金安全阈值**

* dailyCap、hotWalletMax、pause
* 目的：即使出事也只损失“一天额度”

6. **对外免责声明三句话**

* 只认 OKX API 记录
* 需在有效期内申请理赔
* 人工审核 + 24h 清账

---

## C. 你要怎么“最省时间”推进（建议分 3 天完成）

你不需要写代码，你只要做“决策输入”，其余让开发/AI 执行。

### Day 1：把规则写死（你只要确认 10 分钟）

* payoutUSDC：固定多少（先小）
* premiumUSDC：先固定或简单参数化
* dailyCap / hotWalletMax：先小
* OKX 绑定方式：只读 API（写死）

交付物：一页《V0 参数表》

### Day 2：把闭环跑通（开发干活）

* purchase → policy 入库
* claim → 拉 OKX → 证据包入库（PENDING）
* admin → approve/reject
* payout batch → 发 USDC → 回填 txHash

交付物：一段录屏（内部）

### Day 3：把“可审计 + 可宣传”补齐（开发 + 你）

* 导出：每日 payout 报表（CSV/JSON）
* 页面：公开的“Proof 页面”（显示 hash + tx + 时间，不泄露隐私）
* README：V0 工作原理 + 风控开关说明

交付物：对外 Demo + 文案

---

## D. 把保险放入“大项目”作为子项目的最稳结构

你现在做法建议是：**保险作为独立域模块，可单独部署，但共享钱包连接与 UI 框架。**

**推荐结构（你已经接近了）**

* `apps/web`：大前端（共享钱包、路由）
* `apps/insurance-admin`：管理后台（可独立部署，最关键）
* `apps/api`：后端（insurance routes 独立）
* `packages/insurance-core`：定价/规则/证据 canonicalizer（纯逻辑，易测试）
* `contracts/checkout-usdc`：收款/放款（极简）

关键原则：

* 保险模块可拔插（不影响主站其他业务）
* admin 后台隔离部署（更安全）

---

## E. 媒体报道与比赛申请，你只需要 3 个“可讲故事的钉子”

1. **真实可用闭环视频**（最强证据）
2. **可审计证据机制**（hash/日志/回放）
3. **风控设计**（人工放款、每日清账、热钱包限额、可暂停）

这三样有了，媒体和评委就懂：你不是 PPT 项目。

---

## F. 我们接下来“最省时间”的合作方式

你给我 1 次输入，我就能把执行清单钉死到文件级别。

你只需要发我这一条（复制填空就行）：

* payoutUSDC = ?
* premiumUSDC = ?（或“按本金*费率”）
* dailyCap = ?
* hotWalletMax = ?
* OKX 绑定：Read-only API key（确认 yes/no）
* 清账时间：每天几点（按你所在时区）

你不想填也行，我可以按保守默认值直接给一套“先上线再调”的参数。

只要你说一句：**“按保守默认值推进”**，我就把下一步输出变成：

* 任务拆解（前端/后端/合约/运维）
* admin 面板字段与接口
* 每日清账 SOP 文档（可直接交给运营/助理执行）

