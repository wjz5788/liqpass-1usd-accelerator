# LiqPass å¤šä¸šåŠ¡æ¨¡å—æ¶æ„å¯è¡Œæ€§è¯„å®¡æŠ¥å‘Š

> **è¯„å®¡å¯¹è±¡**: LiqPass å‰ç«¯é¡¹ç›®ï¼ˆ1USD Accelerator / LiqPass ä¿é™© / ç­–ç•¥åŒº / æœªæ¥æ–°å¢æ¨¡å—ï¼‰  
> **è¯„å®¡äºº**: èµ„æ·±è½¯ä»¶æ¶æ„å¸ˆ + å¹³å°è´Ÿè´£äºº  
> **è¯„å®¡æ—¥æœŸ**: 2026-01-21  
> **é¡¹ç›®é˜¶æ®µ**: Demo é˜¶æ®µ â†’ äº§å“åŒ–æ¼”è¿›

---

## ğŸ“‹ ä¿¡æ¯æ”¶é›†æ¸…å•

åœ¨ç»™å‡ºå®Œæ•´å»ºè®®å‰ï¼Œéœ€è¦ä»¥ä¸‹**æ ¸å¿ƒä¿¡æ¯**ï¼ˆå¦‚æœªæä¾›ï¼Œå°†åŸºäºé»˜è®¤å‡è®¾ï¼‰ï¼š

1. **éƒ¨ç½²ç­–ç•¥**: å„æ¨¡å—æ˜¯å¦éœ€è¦ç‹¬ç«‹åŸŸå/éƒ¨ç½²ï¼Ÿè¿˜æ˜¯å…±äº«ä¸€ä¸ªä¸»åŸŸåï¼Ÿ
2. **å›¢é˜Ÿè§„æ¨¡**: æ˜¯å¦æœ‰å¤šä¸ªå›¢é˜Ÿå¹¶è¡Œå¼€å‘ä¸åŒæ¨¡å—ï¼Ÿè¿˜æ˜¯åŒä¸€å›¢é˜Ÿï¼Ÿ
3. **å‘å¸ƒé¢‘ç‡**: å„æ¨¡å—çš„å‘å¸ƒèŠ‚å¥æ˜¯å¦ä¸€è‡´ï¼Ÿï¼ˆå¦‚ä¿é™©æ¨¡å—æœˆæ›´æ–°ï¼ŒAccelerator å‘¨æ›´æ–°ï¼‰
4. **æŠ€æœ¯æ ˆå·®å¼‚**: æ˜¯å¦æœ‰æ¨¡å—éœ€è¦ä¸åŒçš„æŠ€æœ¯æ ˆï¼Ÿï¼ˆå¦‚æŸæ¨¡å—éœ€è¦ç”¨ Next.js SSRï¼‰
5. **æƒé™éš”ç¦»**: æ¨¡å—é—´æ˜¯å¦æœ‰ä¸¥æ ¼çš„æƒé™è¾¹ç•Œï¼Ÿï¼ˆå¦‚ç®¡ç†å‘˜åªèƒ½ç®¡ç†ç‰¹å®šæ¨¡å—ï¼‰
6. **æ•°æ®å…±äº«**: å„æ¨¡å—æ˜¯å¦éœ€è¦å®æ—¶å…±äº«ç”¨æˆ·æ•°æ®/äº¤æ˜“æ•°æ®ï¼Ÿ
7. **æµé‡çº§åˆ«**: é¢„æœŸå„æ¨¡å—çš„ç”¨æˆ·é‡çº§å·®å¼‚ï¼ˆå¦‚ Accelerator æ—¥æ´» 1 ä¸‡ï¼Œä¿é™©æ—¥æ´» 100ï¼‰
8. **åˆçº¦ä¾èµ–**: å„æ¨¡å—å¯¹åº”çš„æ™ºèƒ½åˆçº¦æ˜¯å¦ç‹¬ç«‹éƒ¨ç½²ï¼Ÿ

### ğŸ” å½“å‰å‡è®¾ï¼ˆåŸºäºä»£ç åˆ†æï¼‰

- âœ… å•å›¢é˜Ÿå¼€å‘ï¼Œå°è§„æ¨¡è¿­ä»£
- âœ… ç»Ÿä¸€åŸŸåï¼Œå…±äº«é’±åŒ…ç™»å½•
- âœ… Demo é˜¶æ®µï¼Œå¿«é€ŸéªŒè¯ MVP
- âœ… æ¨¡å—é—´ä½è€¦åˆï¼ˆå·²æœ‰ `domains/` ç»“æ„ï¼‰
- âœ… å…±äº«è®¾è®¡ç³»ç»Ÿå’ŒåŸºç¡€ç»„ä»¶

---

## 1ï¸âƒ£ ç»“è®ºä¸å»ºè®®

### ğŸ¯ å»ºè®®æ–¹æ¡ˆï¼š**å•ä»“å¤šæ¨¡å— + æ‡’åŠ è½½è·¯ç”±**

| ç»´åº¦ | å•ä»“å¤šæ¨¡å— | å¤šä»“+ç»Ÿä¸€å…¥å£ |
|------|-----------|--------------|
| **é€‚ç”¨åœºæ™¯** | âœ… å½“å‰é˜¶æ®µï¼ˆDemoâ†’äº§å“åŒ–ï¼‰ | âš ï¸ è§„æ¨¡åŒ–åï¼ˆæ—¥æ´» 10 ä¸‡+ï¼‰ |
| **å¼€å‘æ•ˆç‡** | â­â­â­â­â­ å¿«é€Ÿè¿­ä»£ï¼Œå…±äº«å¤ç”¨ | â­â­â­ éœ€è¦ç»´æŠ¤å¤šå¥—æ„å»º |
| **éƒ¨ç½²çµæ´»æ€§** | â­â­â­ æŒ‰éœ€æ‹†åˆ†ï¼ˆVite æ”¯æŒä»£ç åˆ†å‰²ï¼‰ | â­â­â­â­â­ å¯ç‹¬ç«‹éƒ¨ç½²/å›æ»š |
| **ä»£ç å¤ç”¨** | â­â­â­â­â­ ç»„ä»¶/Hook/Util ç›´æ¥å…±äº« | â­â­â­ éœ€è¦ NPM ç§æœ‰åŒ…æˆ– monorepo |
| **æŠ€æœ¯å€ºé£é™©** | â­â­â­ éœ€è¦ä¸¥æ ¼è§„èŒƒï¼ˆå¦åˆ™è€¦åˆï¼‰ | â­â­â­â­ å¼ºåˆ¶è¾¹ç•Œï¼Œä½†ç»´æŠ¤æˆæœ¬é«˜ |
| **å›¢é˜Ÿåä½œ** | â­â­â­â­â­ å°å›¢é˜Ÿï¼ˆ1-5äººï¼‰ç†æƒ³ | â­â­â­â­ å¤šå›¢é˜Ÿï¼ˆ5äººä»¥ä¸Šï¼‰å‹å¥½ |

### ğŸ“Š é£é™©è¯„çº§

| é£é™©é¡¹ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|---------|---------|
| **å…¨å±€çŠ¶æ€æ±¡æŸ“** | ğŸŸ¡ ä¸­ | æ¨¡å—ç‹¬ç«‹ Storeï¼Œç¦æ­¢è·¨åŸŸè®¿é—® |
| **ä¾èµ–å€’çŒ** | ğŸŸ¢ ä½ | ä¸¥æ ¼ `domains/` ä¾èµ–è§„åˆ™ï¼ˆè§ä¸‹æ–‡ï¼‰ |
| **æ„å»ºä½“ç§¯è†¨èƒ€** | ğŸŸ¡ ä¸­ | æŒ‰è·¯ç”±æ‡’åŠ è½½ï¼Œå…±äº«ä»£ç æå–å…¬å…± chunk |
| **æ¨¡å—é—´è€¦åˆ** | ğŸŸ¡ ä¸­ | ä»£ç å®¡æŸ¥ + ESLint è§„åˆ™ + æ¶æ„å®ˆå«æµ‹è¯• |
| **æŠ€æœ¯å€ºç´¯ç§¯** | ğŸŸ  é«˜ï¼ˆå¦‚ä¸è§„èŒƒï¼‰ | å®šæœŸé‡æ„ + æ¶æ„è¯„å®¡ï¼ˆæ¯ 3 ä¸ªæœˆï¼‰ |

### âœ… æ¨èç†ç”±

1. **ä½ çš„ä»£ç å·²ç»åœ¨èµ°è¿™æ¡è·¯**ï¼š`domains/accelerator`ã€`domains/insurance` ç­‰å·²ç»æ˜¯æ¨¡å—åŒ–è®¾è®¡
2. **å¿«é€ŸéªŒè¯ MVP**ï¼šåœ¨ Demo é˜¶æ®µé¿å…è¿‡åº¦å·¥ç¨‹åŒ–ï¼Œä¿æŒæ•æ·
3. **å¹³æ»‘æ¼”è¿›è·¯å¾„**ï¼šæœªæ¥å¯é€šè¿‡ Vite çš„ `manualChunks` æˆ–è¿ç§»åˆ° Nx monorepo å®ç°ç‰©ç†éš”ç¦»
4. **æˆæœ¬å¯æ§**ï¼šæ— éœ€é¢å¤–çš„ CI/CD é…ç½®ã€NPM ç§æœ‰åŒ…æˆ–å¾®å‰ç«¯æ¡†æ¶

---

## 2ï¸âƒ£ æ¨¡å—è¾¹ç•Œå®šä¹‰

### ğŸ§© Domain æ¨¡å‹

| æ¨¡å—åç§° | Domain è¾¹ç•Œ | ç‹¬ç«‹å†…å®¹ | å¯å…±äº«å†…å®¹ |
|---------|------------|---------|-----------|
| **Accelerator (1USD)** | `domains/accelerator/` | â€¢ é¡¹ç›®åˆ—è¡¨/è¯¦æƒ…é¡µé¢<br>â€¢ æŠ•ç¥¨/è´¨æŠ¼é€»è¾‘<br>â€¢ å¥–æ± è®¡ç®—<br>â€¢ åˆçº¦äº¤äº’ (`useAcceleratorContract`) | â€¢ é’±åŒ…è¿æ¥<br>â€¢ é“¾é…ç½®<br>â€¢ UI ç»„ä»¶åº“ |
| **Insurance (ä¿é™©)** | `domains/insurance/` | â€¢ ä¿å•è´­ä¹°æµç¨‹<br>â€¢ ç†èµ”çŠ¶æ€æœº<br>â€¢ ä¿è´¹è®¡ç®—<br>â€¢ é£æ§ API è°ƒç”¨ | â€¢ è¡¨å•éªŒè¯<br>â€¢ Toast é€šçŸ¥<br>â€¢ æƒé™å®ˆå« |
| **Arena (ç­–ç•¥åŒº)** | `domains/arena/` | â€¢ ç­–ç•¥åˆ—è¡¨/è¯¦æƒ…<br>â€¢ å›æµ‹æ•°æ®å±•ç¤º<br>â€¢ å¤åˆ¶äº¤æ˜“é€»è¾‘ | â€¢ å›¾è¡¨åº“ (Recharts)<br>â€¢ æ—¶é—´æ ¼å¼åŒ–å·¥å…· |
| **Stocks (é‡åŒ–æ¯”èµ›)** | `domains/stocks/` | â€¢ æ¯”èµ›æ’è¡Œæ¦œ<br>â€¢ å‚èµ›è€…ç®¡ç†<br>â€¢ å®æ—¶è¡Œæƒ… WebSocket | â€¢ WebSocket å°è£…<br>â€¢ åˆ†é¡µç»„ä»¶ |
| **æœªæ¥æ¨¡å—** | `domains/new-module/` | â€¢ ä¸šåŠ¡é¡µé¢<br>â€¢ ä¸šåŠ¡çŠ¶æ€<br>â€¢ ä¸šåŠ¡åˆçº¦ | â€¢ åŸºç¡€è®¾æ–½å±‚ |

### ğŸ“‚ æ¯ä¸ªæ¨¡å—çš„æ ‡å‡†ç»“æ„

```
domains/<module-name>/
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶ï¼ˆåªèƒ½è¢« routes.ts å¼•ç”¨ï¼‰
â”‚   â”œâ”€â”€ ModuleHomePage.tsx
â”‚   â”œâ”€â”€ ModuleDetailPage.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/         # æ¨¡å—ç§æœ‰ç»„ä»¶ï¼ˆä¸èƒ½è¢«å…¶ä»–åŸŸå¼•ç”¨ï¼‰
â”‚   â”œâ”€â”€ ModuleCard.tsx
â”‚   â””â”€â”€ ModuleForm.tsx
â”œâ”€â”€ hooks/              # æ¨¡å—ä¸šåŠ¡ Hook
â”‚   â”œâ”€â”€ useModuleData.ts
â”‚   â””â”€â”€ useModuleSubmit.ts
â”œâ”€â”€ services/           # API è°ƒç”¨å±‚
â”‚   â””â”€â”€ moduleApi.ts
â”œâ”€â”€ store/              # Zustand æ¨¡å—çŠ¶æ€
â”‚   â””â”€â”€ moduleStore.ts
â”œâ”€â”€ contracts/          # æ™ºèƒ½åˆçº¦äº¤äº’
â”‚   â””â”€â”€ useModuleContract.ts
â”œâ”€â”€ types/              # æ¨¡å—ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/              # æ¨¡å—å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ calculations.ts
â””â”€â”€ routes.ts           # æ¨¡å—è·¯ç”±é…ç½®ï¼ˆå¯¼å‡ºåˆ° app/router.tsxï¼‰
```

### ğŸš« ç¦æ­¢äº‹é¡¹

| ç¦æ­¢è¡Œä¸º | æ­£ç¡®åšæ³• |
|---------|---------|
| âŒ `domains/accelerator` å¯¼å…¥ `domains/insurance` | âœ… é€šè¿‡ `shared/` æˆ–äº‹ä»¶æ€»çº¿é€šä¿¡ |
| âŒ åœ¨ `pages/` é‡Œå†™ä¸šåŠ¡é€»è¾‘ | âœ… é€»è¾‘æ”¾ `hooks/` æˆ– `services/` |
| âŒ å…¨å±€çŠ¶æ€å­˜å‚¨æ‰€æœ‰æ¨¡å—æ•°æ® | âœ… æ¯ä¸ªæ¨¡å—ç‹¬ç«‹ Zustand store |
| âŒ ç»„ä»¶åº“ `components/` æ··æ‚ä¸šåŠ¡é€»è¾‘ | âœ… ç»„ä»¶åªè´Ÿè´£å±•ç¤ºï¼Œä¸šåŠ¡é€»è¾‘åœ¨ `domains/` |

---

## 3ï¸âƒ£ å…±äº«ç­–ç•¥æ¸…å•

### âœ… **å¯ä»¥å…±äº«ï¼ˆInfrastructure Layerï¼‰**

| ç±»å‹ | ä½ç½® | ç¤ºä¾‹ |
|------|------|-----|
| **é’±åŒ…è¿æ¥** | `wallet/` | RainbowKit é…ç½®ã€é’±åŒ…çŠ¶æ€åŒæ­¥ |
| **é“¾é…ç½®** | `config/chains.ts` | æ”¯æŒçš„é“¾ã€RPC èŠ‚ç‚¹ã€åŒºå—æµè§ˆå™¨ |
| **UI ç»„ä»¶åº“** | `components/` | Buttonã€Cardã€Modalã€Form ç­‰æ— ä¸šåŠ¡ç»„ä»¶ |
| **å¸ƒå±€ç»„ä»¶** | `components/Layout.tsx` | é¡¶éƒ¨å¯¼èˆªã€ä¾§è¾¹æ ã€Footer |
| **è·¯ç”±å®ˆå«** | `app/guards/` | RequireRoleã€RequireWallet |
| **é€šç”¨ Hook** | `hooks/` | useDebounceã€useLocalStorageã€useMediaQuery |
| **å·¥å…·å‡½æ•°** | `shared/utils/` | æ—¶é—´æ ¼å¼åŒ–ã€æ•°å­—æ ¼å¼åŒ–ã€åœ°å€æˆªæ–­ |
| **ç±»å‹å®šä¹‰** | `shared/types/` | é“¾ ID æšä¸¾ã€ç”¨æˆ·è§’è‰² enum |
| **è®¾è®¡ä»¤ç‰Œ** | `index.css` (Tailwind) | é¢œè‰²ã€é—´è·ã€åœ†è§’ã€é˜´å½± |
| **æ—¥å¿—/ç›‘æ§** | `shared/logger.ts` | Sentryã€åŸ‹ç‚¹ SDK |

### ğŸš« **ç¦æ­¢å…±äº«ï¼ˆDomain-Specificï¼‰**

| ç±»å‹ | åŸå›  | æ­£ç¡®åšæ³• |
|------|------|---------|
| **ä¸šåŠ¡çŠ¶æ€** | é¿å…è€¦åˆï¼Œå„æ¨¡å—çŠ¶æ€ç‹¬ç«‹ | æ¯ä¸ª domain è‡ªå·±çš„ `store/` |
| **å®šä»·/é£æ§é€»è¾‘** | ä¸šåŠ¡æ ¸å¿ƒï¼Œä¸èƒ½è¢«å…¶ä»–æ¨¡å—ç¯¡æ”¹ | å°è£…åœ¨ `domains/<name>/services/` |
| **æ•°æ®åº“è¡¨/API** | å¼ºä¸šåŠ¡å±æ€§ï¼Œé¿å…è·¨åŸŸè°ƒç”¨ | é€šè¿‡ BFF å±‚éš”ç¦» |
| **åˆçº¦ ABI/åœ°å€** | ç‰ˆæœ¬ç®¡ç†ç‹¬ç«‹ï¼Œé¿å…è¯¯ç”¨ | `domains/<name>/contracts/` |
| **é¡µé¢çº§ç»„ä»¶** | é¡µé¢æ˜¯æ¨¡å—è¾¹ç•Œï¼Œä¸èƒ½å¤ç”¨ | å¦‚éœ€å¤ç”¨ï¼ŒæŠ½è±¡æˆé€šç”¨ç»„ä»¶æ”¾ `components/` |
| **è·¯ç”±é…ç½®** | å„æ¨¡å—è·¯ç”±ç‹¬ç«‹ç»´æŠ¤ | `domains/<name>/routes.ts` å¯¼å‡º |

### ğŸ”€ **æ¡ä»¶å…±äº«ï¼ˆéœ€è¦æŠ½è±¡ï¼‰**

| åœºæ™¯ | æŠ½è±¡æ–¹å¼ | ç¤ºä¾‹ |
|------|---------|-----|
| **æ¨¡å—é—´é€šä¿¡** | äº‹ä»¶æ€»çº¿æˆ–å…¨å±€çŠ¶æ€ | `shared/eventBus.ts` å‘å¸ƒè®¢é˜…æ¨¡å¼ |
| **å…±äº«æ•°æ®ç¼“å­˜** | React Query å…¨å±€ç¼“å­˜ | `shared/queryClient.ts` |
| **é”™è¯¯å¤„ç†** | ç»Ÿä¸€é”™è¯¯è¾¹ç•Œ | `components/common/ErrorBoundary.tsx` |
| **è¡¨å•éªŒè¯** | Schema å±‚ | `shared/schemas/` ä½¿ç”¨ Zod |

---

## 4ï¸âƒ£ æ¨èæ¶æ„æ–¹æ¡ˆ

### ğŸ—ï¸ å‰ç«¯ç›®å½•ç»“æ„

```
liqpass-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                     # åº”ç”¨æ ¸å¿ƒï¼ˆè·¨åŸŸï¼‰
â”‚   â”‚   â”œâ”€â”€ router.tsx           # è·¯ç”±èšåˆå™¨ï¼ˆæ±‡æ€»å„ domain routesï¼‰
â”‚   â”‚   â”œâ”€â”€ guards/              # è·¯ç”±å®ˆå«
â”‚   â”‚   â”‚   â”œâ”€â”€ RequireRole.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RequireWallet.tsx
â”‚   â”‚   â””â”€â”€ pages/               # è·¨åŸŸé¡µé¢
â”‚   â”‚       â”œâ”€â”€ LoginRequiredPage.tsx
â”‚   â”‚       â””â”€â”€ ForbiddenPage.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ domains/                 # ä¸šåŠ¡æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ accelerator/         # 1USD Accelerator æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceleratorHomePage.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDetailPage.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AdminPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCard.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ VotingPanel.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useProjectList.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useVoting.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ acceleratorApi.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ acceleratorStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ abi.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useAcceleratorContract.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ routes.ts        # âš ï¸ å¯¼å‡ºè·¯ç”±é…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ insurance/           # ä¿é™©æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InsuranceHomePage.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PurchasePage.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ClaimPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”‚   â””â”€â”€ routes.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ arena/               # ç­–ç•¥åŒºæ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ ... (åŒä¸Šç»“æ„)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ stocks/              # é‡åŒ–æ¯”èµ›æ¨¡å—
â”‚   â”‚       â””â”€â”€ ... (åŒä¸Šç»“æ„)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # å…±äº« UI ç»„ä»¶ï¼ˆæ— ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â””â”€â”€ Navbar.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ wallet/                  # é’±åŒ…å±‚ï¼ˆå…±äº«ï¼‰
â”‚   â”‚   â”œâ”€â”€ config.ts            # RainbowKit é…ç½®
â”‚   â”‚   â”œâ”€â”€ useSyncWalletToStore.ts
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â””â”€â”€ useConnectWallet.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # é€šç”¨ Hookï¼ˆæ— ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ useDebounce.ts
â”‚   â”‚   â”œâ”€â”€ useLocalStorage.ts
â”‚   â”‚   â””â”€â”€ useMediaQuery.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # å…±äº«æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts        # Axios/Fetch é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ interceptors.ts
â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚       â””â”€â”€ tracker.ts       # åŸ‹ç‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                  # å…±äº«å·¥å…·/ç±»å‹
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ formatters.ts    # æ—¶é—´/æ•°å­—æ ¼å¼åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.ts
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ common.ts        # å…¨å±€ç±»å‹
â”‚   â”‚   â”œâ”€â”€ schemas/             # Zod Schema
â”‚   â”‚   â”‚   â””â”€â”€ formSchemas.ts
â”‚   â”‚   â””â”€â”€ eventBus.ts          # æ¨¡å—é—´é€šä¿¡ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                   # å…¨å±€çŠ¶æ€ï¼ˆä»…åŸºç¡€è®¾æ–½ï¼‰
â”‚   â”‚   â”œâ”€â”€ authStore.ts         # ç”¨æˆ·ç™»å½•çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ themeStore.ts        # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚   â””â”€â”€ walletStore.ts       # é’±åŒ…è¿æ¥çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ chains.ts            # é“¾é…ç½®
â”‚   â”‚   â””â”€â”€ env.ts               # ç¯å¢ƒå˜é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ index.css                # å…¨å±€æ ·å¼ + Tailwind
â”‚   â””â”€â”€ main.tsx                 # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ contracts/                   # æ™ºèƒ½åˆçº¦ï¼ˆå¯é€‰ï¼Œæ¨èç‹¬ç«‹ä»“åº“ï¼‰
â”‚   â”œâ”€â”€ accelerator/
â”‚   â”œâ”€â”€ insurance/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md          # æ¶æ„å†³ç­–è®°å½• (ADR)
â”‚   â””â”€â”€ module-guide.md          # æ¨¡å—å¼€å‘æŒ‡å—
â”‚
â”œâ”€â”€ .husky/                      # Git Hooks
â”‚   â””â”€â”€ pre-commit               # è¿è¡Œ lint + typecheck
â”‚
â”œâ”€â”€ vite.config.ts               # Vite é…ç½®ï¼ˆä»£ç åˆ†å‰²ï¼‰
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

### ğŸ”— æ¨¡å—ä¾èµ–å…³ç³»å›¾

```mermaid
graph TB
    subgraph "App Layer (è·¨åŸŸ)"
        Router[app/router.tsx]
        Guards[app/guards]
    end

    subgraph "Domains (ä¸šåŠ¡æ¨¡å—)"
        Accelerator[domains/accelerator]
        Insurance[domains/insurance]
        Arena[domains/arena]
        Stocks[domains/stocks]
    end

    subgraph "Shared Infrastructure (å…±äº«åŸºç¡€è®¾æ–½)"
        Components[components/]
        Wallet[wallet/]
        Hooks[hooks/]
        Services[services/]
        Store[store/]
        Shared[shared/]
    end

    Router --> Accelerator
    Router --> Insurance
    Router --> Arena
    Router --> Stocks

    Accelerator --> Components
    Accelerator --> Wallet
    Accelerator --> Hooks
    Accelerator --> Shared

    Insurance --> Components
    Insurance --> Wallet
    Insurance --> Hooks
    Insurance --> Shared

    Arena --> Components
    Arena --> Shared

    Stocks --> Components
    Stocks --> Shared

    Guards --> Store

    style Accelerator fill:#ffd700
    style Insurance fill:#4169e1
    style Arena fill:#32cd32
    style Stocks fill:#ff6347
```

### ğŸ“¦ Vite é…ç½®ï¼ˆä»£ç åˆ†å‰²ï¼‰

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          // å…±äº«åŸºç¡€åº“
          'vendor-react': ['react', 'react-dom', 'react-router-dom'],
          'vendor-web3': ['wagmi', 'viem', '@rainbow-me/rainbowkit'],
          
          // å„æ¨¡å—ç‹¬ç«‹æ‰“åŒ…
          'domain-accelerator': [
            './src/domains/accelerator/pages',
            './src/domains/accelerator/components',
          ],
          'domain-insurance': [
            './src/domains/insurance/pages',
            './src/domains/insurance/components',
          ],
          'domain-arena': [
            './src/domains/arena/pages',
          ],
          'domain-stocks': [
            './src/domains/stocks/pages',
          ],
        },
      },
    },
  },
})
```

---

## 5ï¸âƒ£ åå¤§æ¶æ„é™·é˜±ä¸è§„é¿æ‰‹æ®µ

### 1. ğŸ”´ å…¨å±€çŠ¶æ€æ±¡æŸ“

**é—®é¢˜**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šæ‰€æœ‰æ¨¡å—æ•°æ®å¡è¿›ä¸€ä¸ª store
const useGlobalStore = create((set) => ({
  acceleratorProjects: [],
  insurancePolicies: [],
  arenaStrategies: [],
  // ... å˜æˆä¸Šå¸å¯¹è±¡
}))
```

**è§„é¿**ï¼š
```typescript
// âœ… æ­£ç¡®ï¼šæ¯ä¸ªæ¨¡å—ç‹¬ç«‹ store
// domains/accelerator/store/projectStore.ts
export const useProjectStore = create((set) => ({
  projects: [],
  selectedProject: null,
}))

// domains/insurance/store/policyStore.ts
export const usePolicyStore = create((set) => ({
  policies: [],
  activeClaim: null,
}))
```

**æ£€æµ‹æ‰‹æ®µ**ï¼šESLint è§„åˆ™ç¦æ­¢è·¨åŸŸå¯¼å…¥ store
```javascript
// .eslintrc.cjs
rules: {
  'no-restricted-imports': [
    'error',
    {
      patterns: [
        {
          group: ['**/domains/*/store'],
          message: 'ç¦æ­¢è·¨åŸŸå¯¼å…¥ storeï¼Œè¯·ä½¿ç”¨äº‹ä»¶æ€»çº¿æˆ– React Query',
        },
      ],
    },
  ],
}
```

---

### 2. ğŸ”´ ä¾èµ–å€’çŒï¼ˆDomain äº’ç›¸ä¾èµ–ï¼‰

**é—®é¢˜**ï¼š
```typescript
// âŒ domains/insurance/pages/InsurancePage.tsx
import { ProjectCard } from '../../accelerator/components/ProjectCard'
```

**è§„é¿**ï¼š
```typescript
// âœ… å…±äº«ç»„ä»¶æå‡åˆ° components/
// components/common/GenericCard.tsxï¼ˆæŠ½è±¡é€šç”¨èƒ½åŠ›ï¼‰

// æˆ–ä½¿ç”¨ç»„åˆæ¨¡å¼
// domains/insurance/pages/InsurancePage.tsx
import { Card } from '@/components/common/Card'
```

**æ¶æ„å®ˆå«æµ‹è¯•**ï¼š
```typescript
// src/test/architecture.test.ts
import { describe, it, expect } from 'vitest'
import { exec } from 'child_process'

describe('Architecture Rules', () => {
  it('domains should not import from other domains', async () => {
    const result = await exec(
      'grep -r "from.*domains/" src/domains/accelerator --exclude-dir=node_modules'
    )
    expect(result).not.toContain('domains/insurance')
    expect(result).not.toContain('domains/arena')
  })
})
```

---

### 3. ğŸ”´ å…±äº«ç»„ä»¶å˜æˆä¸Šå¸ç»„ä»¶

**é—®é¢˜**ï¼š
```typescript
// âŒ components/Card.tsx è¢«å¡æ»¡å„ç§ä¸šåŠ¡é€»è¾‘
<Card
  mode="accelerator" // ä¸šåŠ¡ mode
  onVote={...}        // Accelerator ä¸“å±
  onClaim={...}       // Insurance ä¸“å±
  showChart={...}     // Arena ä¸“å±
/>
```

**è§„é¿**ï¼š
```typescript
// âœ… ç»„ä»¶åªè´Ÿè´£å±•ç¤ºï¼Œä¸šåŠ¡é€»è¾‘åœ¨ domains/
// components/common/Card.tsxï¼ˆæ— ä¸šåŠ¡é€»è¾‘ï¼‰
export const Card = ({ children, ...props }) => (
  <div className="rounded border p-4" {...props}>
    {children}
  </div>
)

// domains/accelerator/components/ProjectCard.tsx
import { Card } from '@/components/common/Card'
export const ProjectCard = ({ project }) => (
  <Card>
    <h3>{project.name}</h3>
    <VotingButton projectId={project.id} />
  </Card>
)
```

**å®¡æŸ¥æ¸…å•**ï¼š
- [ ] ç»„ä»¶æ˜¯å¦åªæ¥å— `children` å’Œæ ·å¼ propsï¼Ÿ
- [ ] æ˜¯å¦ä¾èµ–ç‰¹å®šä¸šåŠ¡ç±»å‹ï¼ˆå¦‚ `Project` ç±»å‹ï¼‰ï¼Ÿ
- [ ] æ˜¯å¦åŒ…å« API è°ƒç”¨æˆ–çŠ¶æ€ç®¡ç†ï¼Ÿ

---

### 4. ğŸ”´ RPC/é“¾åˆ‡æ¢æ··ä¹±

**é—®é¢˜**ï¼š
```typescript
// âŒ å„æ¨¡å—è‡ªå·±å®šä¹‰é“¾é…ç½®
// domains/accelerator/config.ts
const chains = [mainnet, polygon]

// domains/insurance/config.ts
const chains = [mainnet, arbitrum] // ä¸ä¸€è‡´ï¼
```

**è§„é¿**ï¼š
```typescript
// âœ… ç»Ÿä¸€é“¾é…ç½®
// config/chains.ts
export const SUPPORTED_CHAINS = {
  mainnet: { id: 1, rpc: '...', ... },
  polygon: { id: 137, rpc: '...', ... },
}

// wallet/config.ts
import { SUPPORTED_CHAINS } from '@/config/chains'
export const wagmiConfig = createConfig({
  chains: Object.values(SUPPORTED_CHAINS),
})

// domains/accelerator/contracts/useContract.ts
import { SUPPORTED_CHAINS } from '@/config/chains'
const CONTRACT_ADDRESSES = {
  [SUPPORTED_CHAINS.mainnet.id]: '0x123...',
}
```

---

### 5. ğŸ”´ è·¯ç”±å†²çª

**é—®é¢˜**ï¼š
```typescript
// âŒ domains/accelerator/routes.ts
{ path: '/dashboard', element: <AcceleratorDashboard /> }

// âŒ domains/insurance/routes.ts
{ path: '/dashboard', element: <InsuranceDashboard /> } // å†²çªï¼
```

**è§„é¿**ï¼š
```typescript
// âœ… è·¯ç”±åŠ æ¨¡å—å‰ç¼€
// domains/accelerator/routes.ts
export const acceleratorRoutes = [
  { path: '/accelerator/dashboard', element: <AcceleratorDashboard /> },
  { path: '/accelerator/projects/:id', element: <ProjectDetail /> },
]

// domains/insurance/routes.ts
export const insuranceRoutes = [
  { path: '/insurance/dashboard', element: <InsuranceDashboard /> },
  { path: '/insurance/policies/:id', element: <PolicyDetail /> },
]

// app/router.tsx
const routes = [
  ...acceleratorRoutes,
  ...insuranceRoutes,
]
```

**å‘½åè§„èŒƒ**ï¼š
| æ¨¡å— | è·¯ç”±å‰ç¼€ | ç¤ºä¾‹ |
|------|---------|-----|
| Accelerator | `/accelerator/*` | `/accelerator/projects`, `/accelerator/admin` |
| Insurance | `/insurance/*` | `/insurance/policies`, `/insurance/claims` |
| Arena | `/arena/*` | `/arena/strategies`, `/arena/rankings` |
| Stocks | `/stocks/*` | `/stocks/research`, `/stocks/portfolio` |

---

### 6. ğŸ”´ æ„å»ºä½“ç§¯è†¨èƒ€

**é—®é¢˜**ï¼š
```bash
# æ‰“åŒ…åå‘ç°æ‰€æœ‰æ¨¡å—ä»£ç éƒ½åœ¨ä¸€ä¸ª bundle é‡Œ
dist/
â””â”€â”€ assets/
    â””â”€â”€ index-a1b2c3d4.js  # 5MBï¼
```

**è§„é¿**ï¼š
```typescript
// vite.config.tsï¼ˆè§ä¸Šæ–‡ç¬¬ 4 èŠ‚ï¼‰
// é…ç½® manualChunks æŒ‰æ¨¡å—åˆ†å‰²

// è·¯ç”±æ‡’åŠ è½½
const AcceleratorHome = lazy(() => import('./domains/accelerator/pages/AcceleratorHomePage'))
const InsuranceHome = lazy(() => import('./domains/insurance/pages/InsuranceHomePage'))

// ç»“æœ
dist/
â””â”€â”€ assets/
    â”œâ”€â”€ vendor-react.js          # 200KB
    â”œâ”€â”€ vendor-web3.js           # 300KB
    â”œâ”€â”€ domain-accelerator.js    # 150KB
    â”œâ”€â”€ domain-insurance.js      # 100KB
    â””â”€â”€ ...
```

**æ£€æµ‹**ï¼š
```bash
npm run build
npx vite-bundle-visualizer
```

---

### 7. ğŸ”´ ç±»å‹å®šä¹‰é‡å¤

**é—®é¢˜**ï¼š
```typescript
// âŒ å„æ¨¡å—é‡å¤å®šä¹‰ç›¸åŒç±»å‹
// domains/accelerator/types.ts
type User = { address: string; role: string }

// domains/insurance/types.ts
type User = { address: string; role: string } // é‡å¤ï¼
```

**è§„é¿**ï¼š
```typescript
// âœ… å…±äº«ç±»å‹æ”¾ shared/types/
// shared/types/user.ts
export type User = {
  address: `0x${string}`
  role: 'user' | 'admin'
  connectedAt: Date
}

// shared/types/chain.ts
export type ChainId = 1 | 137 | 42161

// domains/accelerator/types.tsï¼ˆä¸šåŠ¡ç‰¹å®šç±»å‹ï¼‰
import type { User } from '@/shared/types/user'
export type Project = {
  id: string
  creator: User // å¤ç”¨å…±äº«ç±»å‹
  fundingGoal: bigint
}
```

---

### 8. ğŸ”´ ç¯å¢ƒå˜é‡æ··ä¹±

**é—®é¢˜**ï¼š
```typescript
// âŒ å„æ¨¡å—ç¡¬ç¼–ç  API åœ°å€
// domains/accelerator/services/api.ts
const API_URL = 'https://api.example.com/accelerator'

// domains/insurance/services/api.ts
const API_URL = 'https://api.example.com/insurance'
```

**è§„é¿**ï¼š
```typescript
// âœ… ç»Ÿä¸€ç¯å¢ƒå˜é‡ç®¡ç†
// config/env.ts
export const ENV = {
  API_BASE_URL: import.meta.env.VITE_API_BASE_URL,
  ACCELERATOR_CONTRACT: import.meta.env.VITE_ACCELERATOR_CONTRACT,
  INSURANCE_CONTRACT: import.meta.env.VITE_INSURANCE_CONTRACT,
}

// .env.example
VITE_API_BASE_URL=https://api.example.com
VITE_ACCELERATOR_CONTRACT=0x123...
VITE_INSURANCE_CONTRACT=0x456...

// domains/accelerator/services/api.ts
import { ENV } from '@/config/env'
const apiClient = axios.create({
  baseURL: `${ENV.API_BASE_URL}/accelerator`,
})
```

---

### 9. ğŸ”´ æ¨¡å—é—´é€šä¿¡è€¦åˆ

**é—®é¢˜**ï¼š
```typescript
// âŒ ç›´æ¥è°ƒç”¨å…¶ä»–æ¨¡å—çš„å‡½æ•°
// domains/accelerator/hooks/useVoting.ts
import { usePolicyStore } from '../../insurance/store/policyStore'
const { activeClaim } = usePolicyStore() // è€¦åˆï¼
```

**è§„é¿**ï¼š
```typescript
// âœ… æ–¹æ¡ˆ 1: äº‹ä»¶æ€»çº¿ï¼ˆå‘å¸ƒè®¢é˜…ï¼‰
// shared/eventBus.ts
import mitt from 'mitt'
export const eventBus = mitt<{
  'user:voted': { projectId: string; amount: number }
  'policy:purchased': { policyId: string }
}>()

// domains/accelerator/hooks/useVoting.ts
import { eventBus } from '@/shared/eventBus'
const handleVote = () => {
  eventBus.emit('user:voted', { projectId, amount })
}

// domains/insurance/hooks/useInsuranceTrigger.ts
eventBus.on('user:voted', ({ projectId }) => {
  // ç›‘å¬æŠ•ç¥¨äº‹ä»¶ï¼Œè§¦å‘ä¿é™©æ¨è
})

// âœ… æ–¹æ¡ˆ 2: React Query å…¨å±€ç¼“å­˜
// shared/queryClient.ts
export const queryClient = new QueryClient()

// domains/accelerator/hooks/useProjectList.ts
useQuery({ queryKey: ['projects'], queryFn: fetchProjects })

// domains/insurance/hooks/useRelatedProjects.ts
const { data } = useQuery({ queryKey: ['projects'] }) // å…±äº«ç¼“å­˜
```

---

### 10. ğŸ”´ æµ‹è¯•éš”ç¦»å¤±è´¥

**é—®é¢˜**ï¼š
```typescript
// âŒ æµ‹è¯•æ—¶æ‰€æœ‰æ¨¡å—éƒ½åˆå§‹åŒ–
// __tests__/accelerator.test.tsx
import { render } from '@testing-library/react'
import App from '@/App' // åŠ è½½äº†æ‰€æœ‰æ¨¡å—ï¼
```

**è§„é¿**ï¼š
```typescript
// âœ… æµ‹è¯•åªå¯¼å…¥è¢«æµ‹æ¨¡å—
// domains/accelerator/__tests__/ProjectCard.test.tsx
import { render } from '@testing-library/react'
import { ProjectCard } from '../components/ProjectCard'

test('renders project name', () => {
  const project = { id: '1', name: 'Test' }
  const { getByText } = render(<ProjectCard project={project} />)
  expect(getByText('Test')).toBeInTheDocument()
})

// Mock å…±äº«ä¾èµ–
vi.mock('@/wallet/useSyncWalletToStore', () => ({
  useSyncWalletToStore: vi.fn(),
}))
```

---

## 6ï¸âƒ£ æ¼”è¿›è·¯çº¿

### ğŸŒ± é˜¶æ®µ 1: Demo é˜¶æ®µï¼ˆç°åœ¨ï¼Œ1-2 ä¸ªæœˆï¼‰

**ç›®æ ‡**: å¿«é€ŸéªŒè¯ MVPï¼Œä¿æŒæ•æ·

#### è¡ŒåŠ¨æ¸…å•
- [x] âœ… å·²æœ‰ï¼š`domains/` ç»“æ„ï¼ˆacceleratorã€insuranceã€arenaã€stocksï¼‰
- [ ] ğŸ“ åˆ›å»º `docs/module-guide.md` æ–‡æ¡£ï¼ˆå¼€å‘è§„èŒƒï¼‰
- [ ] ğŸ§¹ æ¸…ç†è·¨åŸŸä¾èµ–ï¼ˆè¿è¡Œæ¶æ„å®ˆå«æµ‹è¯•ï¼‰
- [ ] ğŸ”§ é…ç½® Vite `manualChunks`ï¼ˆæŒ‰æ¨¡å—åˆ†å‰²ï¼‰
- [ ] ğŸ“Š æ·»åŠ  Bundle Analyzerï¼ˆç›‘æ§ä½“ç§¯ï¼‰

#### å¯ä»¥å·æ‡’çš„åœ°æ–¹
- âŒ æš‚ä¸éœ€è¦å¾®å‰ç«¯æ¡†æ¶ï¼ˆqiankun/Micro-Appï¼‰
- âŒ æš‚ä¸éœ€è¦ Monorepo å·¥å…·ï¼ˆNx/Turborepoï¼‰
- âŒ æš‚ä¸éœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼ˆç»Ÿä¸€åŸŸåå³å¯ï¼‰
- âš ï¸ å¯ä»¥æš‚æ—¶å…±äº«ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼ˆä½†éœ€è¦æ ‡è®° `// TODO: æŠ½è±¡åˆ° domain`ï¼‰

#### æŠ€æœ¯å€ºåŠ¡è®°å½•
```typescript
// domains/accelerator/hooks/useProjectList.ts
// TODO(architecture): è¿™ä¸ª Hook è¢« insurance æ¨¡å—ä½¿ç”¨ï¼Œéœ€è¦æŠ½è±¡åˆ° shared/
export const useProjectList = () => { ... }
```

---

### ğŸŒ¿ é˜¶æ®µ 2: äº§å“åŒ–ï¼ˆ3-6 ä¸ªæœˆï¼‰

**ç›®æ ‡**: æ¸…ç†æŠ€æœ¯å€ºï¼Œå»ºç«‹è§„èŒƒ

#### è¡ŒåŠ¨æ¸…å•
- [ ] ğŸ“¦ **å‡çº§åˆ° Monorepo**ï¼ˆNx æˆ– pnpm workspaceï¼‰
  ```
  apps/
  â”œâ”€â”€ web/              # ä¸»åº”ç”¨
  â””â”€â”€ admin/            # ç®¡ç†åå°ï¼ˆå¯é€‰ç‹¬ç«‹ï¼‰
  packages/
  â”œâ”€â”€ ui/               # å…±äº«ç»„ä»¶åº“ï¼ˆå‘å¸ƒä¸º @liqpass/uiï¼‰
  â”œâ”€â”€ contracts/        # æ™ºèƒ½åˆçº¦äº¤äº’å±‚
  â””â”€â”€ shared/           # å·¥å…·å‡½æ•°
  ```
- [ ] ğŸ§ª **æå‡æµ‹è¯•è¦†ç›–ç‡**ï¼ˆå•å…ƒæµ‹è¯• 60%+ï¼‰
- [ ] ğŸ“ **å¼•å…¥æ¶æ„å®ˆå«**ï¼ˆDependency Cruiser/eslint-plugin-boundariesï¼‰
- [ ] ğŸ“š **æ–‡æ¡£å®Œå–„**
  - API æ–‡æ¡£ï¼ˆSwagger/TypeDocï¼‰
  - ç»„ä»¶åº“æ–‡æ¡£ï¼ˆStorybookï¼‰
  - æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰

#### æ€§èƒ½ä¼˜åŒ–
```typescript
// æŒ‰è·¯ç”±é¢„åŠ è½½
import { prefetchQuery } from '@tanstack/react-query'
const handleRouteChange = (path) => {
  if (path.startsWith('/accelerator')) {
    prefetchQuery({ queryKey: ['projects'], queryFn: fetchProjects })
  }
}
```

---

### ğŸŒ³ é˜¶æ®µ 3: è§„æ¨¡åŒ–ï¼ˆ6-12 ä¸ªæœˆï¼‰

**ç›®æ ‡**: æ”¯æŒå¤§è§„æ¨¡æµé‡ï¼Œç‹¬ç«‹éƒ¨ç½²

#### è¿ç§»åˆ°å¾®å‰ç«¯

**è§¦å‘æ¡ä»¶**ï¼ˆæ»¡è¶³ 3 ä¸ªåŠä»¥ä¸Šï¼‰ï¼š
- [ ] æ—¥æ´»ç”¨æˆ· 10 ä¸‡+
- [ ] å¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼ˆ5+ äººï¼‰
- [ ] æ¨¡å—å‘å¸ƒé¢‘ç‡å·®å¼‚å¤§ï¼ˆå¦‚ Accelerator å‘¨æ›´æ–°ï¼ŒInsurance æœˆæ›´æ–°ï¼‰
- [ ] éœ€è¦ç‹¬ç«‹å›æ»šæŸä¸ªæ¨¡å—
- [ ] ä¸»åº”ç”¨æ„å»ºæ—¶é—´è¶…è¿‡ 5 åˆ†é’Ÿ

**æ–¹æ¡ˆé€‰æ‹©**ï¼š

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|---------|-----|-----|
| **qiankun (æ¨è)** | ç»Ÿä¸€åŸŸåï¼Œå­åº”ç”¨ç‹¬ç«‹éƒ¨ç½² | â€¢ ç”Ÿæ€æˆç†Ÿ<br>â€¢ æ ·å¼éš”ç¦»<br>â€¢ é€šä¿¡æ–¹ä¾¿ | â€¢ éœ€è¦æ”¹é€ ç°æœ‰åº”ç”¨ |
| **Module Federation** | Webpack/Vite 5+ | â€¢ åŸç”Ÿæ”¯æŒ<br>â€¢ å…±äº«ä¾èµ– | â€¢ é…ç½®å¤æ‚<br>â€¢ éœ€è¦åŒç‰ˆæœ¬æ„å»ºå·¥å…· |
| **iframe** | å¼ºéš”ç¦»éœ€æ±‚ | â€¢ å®Œå…¨éš”ç¦»<br>â€¢ æŠ€æœ¯æ ˆæ— é™åˆ¶ | â€¢ æ€§èƒ½å·®<br>â€¢ é€šä¿¡å¤æ‚ |

**è¿ç§»è·¯å¾„**ï¼š
```typescript
// ä¸»åº”ç”¨
import { registerMicroApps, start } from 'qiankun'

registerMicroApps([
  {
    name: 'accelerator',
    entry: '//localhost:3001',
    container: '#subapp-viewport',
    activeRule: '/accelerator',
  },
  {
    name: 'insurance',
    entry: '//localhost:3002',
    container: '#subapp-viewport',
    activeRule: '/insurance',
  },
])

start()
```

---

## 7ï¸âƒ£ éªŒæ”¶æ¸…å•ï¼ˆåˆå¹¶åˆ°ä¸€ä¸ªæ¡†æ¶çš„ Gateï¼‰

### âœ… ä»£ç ç»“æ„éªŒæ”¶

- [ ] **æ¨¡å—ç‹¬ç«‹æ€§**
  - [ ] æ¯ä¸ªæ¨¡å—æœ‰ç‹¬ç«‹çš„ `routes.ts`
  - [ ] æ¨¡å—å†…ä»£ç ä¸å¯¼å…¥å…¶ä»–æ¨¡å—çš„ `pages/`ã€`components/`ã€`store/`
  - [ ] å…±äº«ä»£ç åœ¨ `components/`ã€`shared/`ã€`wallet/`ã€`hooks/` ç­‰å…¬å…±ç›®å½•

- [ ] **ä¾èµ–æ¸…æ™°**
  - [ ] è¿è¡Œæ¶æ„å®ˆå«æµ‹è¯•é€šè¿‡ï¼ˆ`npm run test:architecture`ï¼‰
  - [ ] ESLint è§„åˆ™æ£€æŸ¥é€šè¿‡ï¼ˆ`npm run lint`ï¼‰
  - [ ] `grep -r "from.*domains/" src/domains/` ä¸åŒ…å«è·¨åŸŸå¯¼å…¥

- [ ] **ç±»å‹å®‰å…¨**
  - [ ] TypeScript ç¼–è¯‘æ— é”™è¯¯ï¼ˆ`npm run typecheck`ï¼‰
  - [ ] å…±äº«ç±»å‹åœ¨ `shared/types/`
  - [ ] æ¨¡å—ç‰¹å®šç±»å‹åœ¨å„è‡ª `domains/<name>/types/`

---

### âœ… åŠŸèƒ½éªŒæ”¶

- [ ] **è·¯ç”±éš”ç¦»**
  - [ ] å„æ¨¡å—è·¯ç”±æœ‰ç‹¬ç«‹å‰ç¼€ï¼ˆå¦‚ `/accelerator/*`ã€`/insurance/*`ï¼‰
  - [ ] è·¯ç”±æ‡’åŠ è½½é…ç½®æ­£ç¡®ï¼ˆ`React.lazy`ï¼‰
  - [ ] æµ‹è¯•ï¼šè®¿é—® `/accelerator/projects` æ—¶ï¼Œä¸åŠ è½½ insurance ä»£ç 

- [ ] **çŠ¶æ€éš”ç¦»**
  - [ ] æ¯ä¸ªæ¨¡å—æœ‰ç‹¬ç«‹çš„ Zustand store
  - [ ] å…¨å±€ store åªåŒ…å«åŸºç¡€è®¾æ–½æ•°æ®ï¼ˆé’±åŒ…ã€ä¸»é¢˜ã€ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼‰
  - [ ] æµ‹è¯•ï¼šInsurance æ¨¡å—åˆ·æ–°æ—¶ï¼Œä¸å½±å“ Accelerator æ¨¡å—çŠ¶æ€

- [ ] **æ ·å¼éš”ç¦»**
  - [ ] æ¨¡å—ç‰¹å®šæ ·å¼åœ¨å„è‡ªç›®å½•ï¼ˆæˆ–ä½¿ç”¨ CSS Modules/Tailwindï¼‰
  - [ ] æ²¡æœ‰å…¨å±€æ ·å¼è¦†ç›–ï¼ˆé™¤äº† `index.css` çš„åŸºç¡€æ ·å¼ï¼‰
  - [ ] æµ‹è¯•ï¼šInsurance ä¸»é¢˜è‰²ä¸å½±å“ Accelerator é¡µé¢

---

### âœ… æ€§èƒ½éªŒæ”¶

- [ ] **ä»£ç åˆ†å‰²**
  - [ ] é¦–å±åŠ è½½ä½“ç§¯ < 500KBï¼ˆgzip åï¼‰
  - [ ] å„æ¨¡å—ä»£ç ç‹¬ç«‹æ‰“åŒ…ï¼ˆè¿è¡Œ `npm run build`ï¼ŒæŸ¥çœ‹ `dist/assets/`ï¼‰
  - [ ] Lighthouse Performance åˆ†æ•° > 90

- [ ] **æ‡’åŠ è½½**
  - [ ] è®¿é—® `/accelerator` æ—¶ä¸åŠ è½½ `/insurance` ä»£ç 
  - [ ] Network é¢æ¿éªŒè¯ï¼šåªåŠ è½½å½“å‰æ¨¡å—çš„ chunk

---

### âœ… å¼€å‘ä½“éªŒéªŒæ”¶

- [ ] **æ–‡æ¡£å®Œå–„**
  - [ ] `docs/module-guide.md` åŒ…å«æ¨¡å—å¼€å‘è§„èŒƒ
  - [ ] `docs/architecture.md` è®°å½•æ¶æ„å†³ç­–
  - [ ] README åŒ…å«é¡¹ç›®ç»“æ„è¯´æ˜

- [ ] **å·¥å…·é“¾**
  - [ ] Git Hooksï¼ˆHuskyï¼‰é…ç½® pre-commitï¼ˆlint + typecheckï¼‰
  - [ ] CI/CD æµç¨‹åŒ…å«æ¶æ„å®ˆå«æµ‹è¯•
  - [ ] VSCode é…ç½®æ–‡ä»¶ï¼ˆ`.vscode/settings.json`ï¼‰åŒ…å«è·¯å¾„åˆ«å

- [ ] **å›¢é˜Ÿåä½œ**
  - [ ] æ–°äººèƒ½åœ¨ 30 åˆ†é’Ÿå†…ç†è§£é¡¹ç›®ç»“æ„
  - [ ] ä»£ç å®¡æŸ¥ Checklist åŒ…å«æ¶æ„è§„èŒƒï¼ˆå¦‚ï¼šç¦æ­¢è·¨åŸŸä¾èµ–ï¼‰

---

### âœ… ä¸šåŠ¡éªŒæ”¶

- [ ] **åŠŸèƒ½å®Œæ•´æ€§**
  - [ ] å„æ¨¡å—æ ¸å¿ƒåŠŸèƒ½å¯ç‹¬ç«‹è¿è¡Œ
  - [ ] è·¨æ¨¡å—åŠŸèƒ½é€šè¿‡äº‹ä»¶æ€»çº¿/React Query é€šä¿¡
  - [ ] æµ‹è¯•ï¼šç¦ç”¨ Insurance æ¨¡å—åï¼ŒAccelerator ä»å¯æ­£å¸¸ä½¿ç”¨

- [ ] **å¯ç§»é™¤æ€§**ï¼ˆå…³é”®ï¼ï¼‰
  - [ ] åˆ é™¤ `domains/insurance/` åï¼Œé¡¹ç›®ä»å¯è¿è¡Œ
  - [ ] åªéœ€ä¿®æ”¹ `app/router.tsx`ï¼ˆç§»é™¤ `insuranceRoutes`ï¼‰
  - [ ] æ— ç¼–è¯‘é”™è¯¯ã€è¿è¡Œæ—¶é”™è¯¯

---

## ğŸ“ é™„å½•ï¼šå¿«é€Ÿå¼€å§‹æŒ‡å—

### 1. åˆ›å»ºæ–°æ¨¡å—

```bash
# è¿è¡Œè„šæ‰‹æ¶è„šæœ¬ï¼ˆéœ€è¦å…ˆåˆ›å»ºï¼‰
npm run create:module -- --name=new-module

# æˆ–æ‰‹åŠ¨åˆ›å»º
mkdir -p src/domains/new-module/{pages,components,hooks,services,store,contracts,types}
touch src/domains/new-module/routes.ts
```

### 2. æ¨¡å—æ¨¡æ¿

```typescript
// src/domains/new-module/routes.ts
import { lazy, createElement } from 'react'
import type { AppRouteObject } from '@/app/routes/types'

const NewModuleHomePage = lazy(() => import('./pages/NewModuleHomePage'))

export const newModuleRoutes: AppRouteObject[] = [
  {
    path: '/new-module',
    element: createElement(NewModuleHomePage),
  },
]

// src/app/router.tsxï¼ˆæ·»åŠ å¯¼å…¥ï¼‰
import { newModuleRoutes } from '../domains/new-module/routes'

const children: AppRouteObject[] = [
  ...crossDomainRoutes,
  ...arenaRoutes,
  ...insuranceRoutes,
  ...stocksRoutes,
  ...acceleratorRoutes,
  ...newModuleRoutes, // ğŸ‘ˆ æ·»åŠ è¿™ä¸€è¡Œ
]
```

### 3. æ¶æ„å®ˆå«æµ‹è¯•

```typescript
// src/test/architecture.test.ts
import { describe, it } from 'vitest'
import { readFileSync } from 'fs'
import { glob } from 'glob'

describe('Architecture Rules', () => {
  it('domains should not import from other domains', () => {
    const domainFiles = glob.sync('src/domains/*/!(routes).ts')
    
    domainFiles.forEach((file) => {
      const content = readFileSync(file, 'utf-8')
      const currentDomain = file.split('/')[2] // e.g., 'accelerator'
      
      const importPattern = /from ['"].*domains\/(\w+)\//g
      const matches = [...content.matchAll(importPattern)]
      
      matches.forEach(([, importedDomain]) => {
        if (importedDomain !== currentDomain) {
          throw new Error(
            `${file} illegally imports from domains/${importedDomain}`
          )
        }
      })
    })
  })
})
```

---

## ğŸ¯ æ€»ç»“

### âœ… æ¨èæ–¹æ¡ˆ
**å•ä»“å¤šæ¨¡å— + ä¸¥æ ¼è¾¹ç•Œ + æŒ‰éœ€æ‹†åˆ†**

### ğŸ“ˆ æ¼”è¿›ç­–ç•¥
1. **ç°åœ¨**ï¼šä¿æŒå•ä»“ï¼ŒæŒ‰ `domains/` ç»„ç»‡ï¼Œä¸¥æ ¼è§„èŒƒ
2. **3 ä¸ªæœˆå**ï¼šå‡çº§åˆ° Monorepoï¼Œæå–å…±äº«åŒ…
3. **è§„æ¨¡åŒ–å**ï¼šæŒ‰éœ€è¿ç§»åˆ°å¾®å‰ç«¯ï¼ˆqiankunï¼‰

### ğŸš¨ æœ€é‡è¦çš„ 3 ä»¶äº‹
1. **ç¦æ­¢è·¨åŸŸä¾èµ–**ï¼ˆESLint + æ¶æ„æµ‹è¯•ï¼‰
2. **æ¯ä¸ªæ¨¡å—å¯ç‹¬ç«‹ç§»é™¤**ï¼ˆéªŒæ”¶æ¸…å•ç¬¬ 4 é¡¹ï¼‰
3. **å®šæœŸé‡æ„**ï¼ˆæ¯ 3 ä¸ªæœˆæ¶æ„è¯„å®¡ï¼‰

---

**å¦‚æœéªŒæ”¶æ¸…å•å…¨éƒ¨é€šè¿‡ï¼Œä½ çš„é¡¹ç›®å°±æ˜¯"å®‰å…¨çš„å•ä»“å¤šæ¨¡å—æ¶æ„"ã€‚** ğŸ‰
