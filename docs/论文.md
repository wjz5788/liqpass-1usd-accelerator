

# 模块化组合信息聚合的对数市场评分规则  
(Logarithmic Market Scoring Rules for Modular Combinatorial Information Aggregation)

Robin Hanson  
乔治梅森大学 经济学系  
2002 年 1 月

## 摘要（Abstract）

在实践中，评分规则能够有效地从个体中引出良好的概率估计，而博彩市场则能够从群体中引出良好的共识估计。市场评分规则结合了这两种机制的优势：既可以从个体或群体中引出估计，又不会因为群体参与而增加额外成本。

在“给定一个事件条件下对另一个事件下注”的情形中，只有对数形式的市场评分规则能够保持被给定事件的概率不变。对数形式同时还能够保持其他事件的条件概率，从而维持条件独立关系。对于能够引出基本事件对之间相对概率的对数规则而言，引出这些基本事件所有组合的概率估计并不会产生额外成本。

## 引言（Introduction）

在理论上，引出概率是困难的。对于期望效用最大化者而言，其选择是由效用与概率共同决定的，因此，在没有对效用或概率施加额外约束的情况下，主观概率无法与依赖于事件的效用相分离（Kadane & Winkler, 1988）。一些更为复杂的方法在理论上可以克服这一问题（Jaffray & Karni, 1999；Hanson, 2002b）。

然而在实践中，较为简单的评分规则及相关方法，已被广泛且成功地用于从个体中引出具有信息价值的事件概率，例如：天气预测（Murphy & Winkler, 1984）、经济预测（O’Carroll, 1977）、风险分析（DeWispelare, Herren, & Clemen, 1995），以及智能计算机系统的工程设计（Druzdzel & van der Gaag, 1995）。此外，简单的会话式陈述也常常被视为可靠的信念引出方式。

一旦能够引出概率，从理论上看，就应当很容易诱导个体将各自的信息聚合为共同的估计。¹ 在有限状态空间中，具有共同先验的贝叶斯理性人，如果反复陈述其信念，并且这些陈述成为共同知识，则最终必然会对未来的陈述形成共同知识（Geanakoplos & Polemarchakis, 1982），从而形成共同估计（Aumann, 1976）。在这一过程中，贝叶斯理性人甚至无法预测他人将在哪个方向上与自己产生分歧（Hanson, 2002a）。

即便在这一过程中存在策略性撒谎的动机，只要通过评分规则反复向每位贝叶斯理性人支付报酬，该博弈最终也会收敛到一个纳什均衡（Kalai & Lehrer, 1993），从而形成关于未来陈述的共同知识。类似的结果在将“共同知识”替换为“共同信念”时同样成立（Monderer & Samet, 1989），并且也适用于所谓的“准贝叶斯者”（Bayesian wannabes）（Hanson, 1997）。

然而在实践中，人类在对话中反复交换意见，并不会产生理论所预测的那种高度收敛（Cowen & Hanson, 2002）。即便如此，投机性市场——如股票、商品与期货市场——似乎仍然能够在很大程度上（尽管有时并不完美）将可获得的相关信息聚合进市场价格之中（Lo, 1997）。尤其是博彩市场，往往能够生成高质量的概率估计（Hausch, Lo, & Ziemba, 1994）。

这一现象尤为引人注目，因为对大多数参与者而言，在这些市场中进行投机似乎并不理性。例如，橙汁期货价格在天气预测方面优于政府官方预测（Roll, 1984）。惠普实验室内部建立的市场，在 8 次销售预测中有 6 次优于官方预测，其余 2 次持平（Plott, 2000）。用于预测美国总统选举的爱荷华电子市场，在 591 次比较中有 451 次比主要民意调查更为准确（Berg, Nelson, & Rietz, 2001）。甚至使用虚拟货币的市场，在预测电影票房与科学进展方面也表现良好（Pennock, Giles, & Nielsen, 2001）。

由于理论在这一领域并非完全可靠的指引，我们或许应当转向评分规则与博彩市场在实践中的经验成功，并尝试结合二者的优点，同时避免它们各自的缺陷。简单的评分规则无法诱导不同个体形成共同估计，而简单的博彩市场则只有在多个人协调对同一事件下注时，才能形成价格估计，并且参与其中通常看起来并不理性。

相比之下，市场评分规则在单个人仅对某一事件进行一次估计时，其行为类似于简单评分规则；而在多个人参与时，它又能够像一个有补贴的博彩市场那样运作，使多个参与者能够反复、且在理性上有理由地进行交互，从而形成共同估计。

在简单评分规则中，个体为每个事件报告一个概率，并根据该报告及最终发生的事件获得支付。市场评分规则是一类评分规则，其中任何人都可以修改当前的官方报告，并根据新的报告获得支付，前提是其同意按照上一位报告者的报告向其支付报酬。其效果是：任何人都可以在最近一次报告所给出的赔率下，进行任意无穷小的公平赌注，并通过改变赔率来实现任意此类赌注的积分。

创建市场评分规则的成本，仅取决于最终报告相对于初始位置所包含的信息量，而不取决于规则被使用的频率或参与人数。与标准博彩市场不同，理性代理人应当预期从参与中获得正的期望收益，并且无需寻找另一位愿意进行匹配下注的交易对手。

人们可能希望获得概率估计的事件数量是巨大的。不仅存在大量简单事件，还存在数量远远更多的这些简单事件的组合。那么，市场评分规则的成本如何随其覆盖的事件数量变化？此外，规则在多大程度上是模块化的？也就是说，如果不同的人专门负责估计不同的事件，那么每个人在修改自己具有专业知识的估计时，能够在多大程度上避免对其他估计产生非预期的影响？

这些问题使对数形式的市场评分规则显得尤为有吸引力。一旦人们已经支付成本来建立一个基于某些基本事件对的对数规则，那么将该规则扩展到这些基本事件的所有组合，并不会产生额外成本。此外，如果……

当某人使用对数规则（logarithmic rule）对“在给定某一事件条件下另一事件的条件概率”进行下注时，在对数规则下，被给定事件的概率不会发生变化，后续事件的条件概率也不会发生变化。因此，对数规则只会改变下注者实际承担风险的那些事件的概率。这支持了条件独立关系的使用。条件独立性是人类用来管理大规模概率空间复杂性的一种常见机制。在对数规则下，对某些事件的下注不会改变其他事件之间的条件独立关系。

例如，给定一个对数规则，它诱导出了周一降雨概率、周二降雨概率以及周三降雨概率的估计，那么进一步诱导诸如“在周一降雨的条件下，周二和周三是否会降雨”的估计并不会产生额外成本。而且，如果有人下注“在周一降雨的条件下周二会降雨”，这一下注不会改变对周一降雨概率的估计。如果当前估计表明，在给定周二降雨概率的条件下，周三降雨的概率与周一降雨的概率相互独立，那么关于“在周一降雨条件下周二降雨”的下注同样不会改变这种独立关系。

本文将首先回顾评分规则（scoring rules），随后讨论市场评分规则（market scoring rules）、它们的成本以及它们的模块化特性。

## 评分规则（Scoring Rules）

考虑一个期望效用最大化的代理人，他对一组完整且互斥的事件集合 \( i \)（共有 \( I \) 个事件）具有主观信念 \( p_i \)，并满足：

$$
\sum_i p_i = 1
$$

该代理人可以根据一个**恰当评分规则**（proper scoring rule）获得现金支付：

$$
x_i = s_i(\boldsymbol{r})
$$

（Savage, 1971）。其中，若事件 \( i \) 实际发生，则代理人获得现金 \( x_i \)；\( r_i \) 是代理人为事件 \( i \) 报告的概率，而

$$
\boldsymbol{r} = \{ r_i \}_i
$$

表示完整的概率报告。

当

$$
\boldsymbol{s} = \{ s_i \}_i
$$

构成一个恰当评分规则时，一个通过选择报告 \( r_i \) 来最大化其期望货币收益的代理人，将会诚实地报告：

$$
r_i = p_i
$$

也就是说，

$$
\boldsymbol{p}
=
\arg\max_{\boldsymbol{r}}
\sum_i p_i s_i(\boldsymbol{r})
\quad
\text{在约束 }
\sum_i r_i = 1
\text{ 下成立。}
$$

对于风险中性且效用不依赖于事件的代理人，其期望货币收益将被最大化。其他类型的代理人同样可以被诱导去最大化期望货币收益。评分规则还可以激励代理人去获取他们原本不会拥有的信息（Clemen, 2002）。

该最大化问题的一阶与二阶条件是：对所有事件 \( j \)，有

$$
\lambda
=
\sum_i p_i
\frac{\partial s_i(\boldsymbol{p})}{\partial p_j}
\quad (1)
$$

以及

$$
0
\ge
\sum_i p_i
\frac{\partial^2 s_i(\boldsymbol{p})}{\partial p_j^2}
\quad (2)
$$

其中，\( \lambda \) 是拉格朗日乘子，\( \frac{\partial}{\partial p_j} \) 表示关于分量 \( j \) 的偏导算子。

对上述一阶条件关于 \( p_k \) 进行微分，并利用偏导算子的交换性：

$$
\frac{\partial^2}{\partial p_k \partial p_j}
=
\frac{\partial^2}{\partial p_j \partial p_k}
$$

即可得到后续推导。

注释：  
2 对于非恰当评分规则，其他报告同样可能使代理人的期望收益达到最大。  
3 如果代理人以具有极端结果的彩票形式获得报酬，并且其效用函数趋近于共同的上下界，则他们应当最大化期望收益（Jaffray & Karni, 1999）。在某种保险博弈之后以彩票形式获得报酬的贝叶斯代理人，应当相对于其客观信念来最大化期望收益，而这种客观信念指的是：在以已知的共同先验并结合其进一步的个人信息进行更新之后，他们将会持有的信念（Hanson, 2002b）。



由
$$
\frac{\partial s_i}{\partial r_j}
=
\frac{\partial s_j}{\partial r_i}
$$

可知，存在某个函数 \( g(\boldsymbol{r}) \)，使得

$$
s_i(\boldsymbol{r})
=
\frac{\partial g(\boldsymbol{r})}{\partial r_i}
$$

（Williamson, Crowell, & Trotter, 1972）。函数 \( g(\boldsymbol{p}) \) 实际上对应于代理人在均衡状态下其期望收益中依赖于其报告 \( \boldsymbol{r} \) 的那一部分（Savage, 1971）。

恰当评分规则（proper scoring rules）的例子包括：

**二次规则（Quadratic）**
$$
s_i
=
a_i
+
b r_i
-
\frac{b}{2}
\sum_j r_j^2
$$

**球面规则（Spherical）**
$$
s_i
=
a_i
+
b
\frac{r_i}{\left( \sum_j r_j^2 \right)^{1/2}}
$$

**对数规则（Logarithmic）**
$$
s_i
=
a_i
+
b \log(r_i)
$$

**幂律规则（Power Law）**
$$
s_i
=
a_i
+
b \alpha
\int_0^{r_i}
\rho_i^{\alpha-2}
\, d\rho_i
-
b
\sum_j r_j^{\alpha}
$$

当 \( \alpha \ge 1 \) 时，幂律规则是恰当评分规则（Selten, 1998）。其中，二次规则（Brier, 1950）与对数规则（Good, 1952）分别是 \( \alpha = 2 \) 和 \( \alpha = 1 \) 的特例。

二次规则满足若干理想性质（Selten, 1998），而对数规则同样满足一系列理想性质（von Holstein, 1970）。例如，对数规则是唯一满足以下约束的规则：存在某些 \( \nu_i \)，使得

$$
\frac{\partial s_i}{\partial r_j}
=
1_{ij} \nu_i
$$

其中，当 \( i=j \) 时 \( 1_{ij}=1 \)，否则 \( 1_{ij}=0 \)。该约束意味着

$$
s_i(\boldsymbol{r}) = s_i(r_i)
$$

即代理人的收益仅依赖于他分配给**实际发生事件**的概率（Savage, 1971）。因此，对数规则是唯一能够同时奖励代理人并通过标准似然方法对其进行评估的规则（Winkler, 1969）。

在实践中，将评分规则 \( s_i(\boldsymbol{r}) \) 从目前定义在满足归一化条件

$$
\sum_i r_i = 1
$$

的情形，扩展到不满足该条件的情形（即 \( \sum_i r_i \neq 1 \)）是很方便的。这可以通过将 \( r_i / \sum_j r_j \) 代替 \( p_i \) 来实现。

例如，扩展的对数评分规则可以写为：

$$
s_i
=
a_i
+
b_i
\log
\left(
\frac{r_i}{\sum_j r_j}
\right)
$$

一种等价的方法是要求：对于所有正的标量 \( \alpha \)，都有

$$
\boldsymbol{s}(\alpha \boldsymbol{r})
=
\boldsymbol{s}(\boldsymbol{r})
$$

这将蕴含

$$
0
\le
\frac{\partial^2 g}{\partial r_i^2}
$$

以及

$$
0
=
\sum_i p_i
\frac{\partial^2 g}{\partial r_i \partial r_j}
$$

并且使得方程 (1) 中的拉格朗日乘子 \( \lambda = 0 \)。

例如，对于扩展的对数规则，有

$$
g(\boldsymbol{r})
=
b
\sum_i
r_i
\log
\left(
\frac{r_i}{\sum_j r_j}
\right)
$$

## 市场评分规则（Market Scoring Rules）

在许多现有市场中，所有交易都与一个或少数几个被称为**做市商**（market makers）的中心参与者进行。这些参与者始终公开给出买入和卖出报价，并根据交易情况不断更新价格。

研究发现，人类做市商在信息聚合方面的表现与标准的双向拍卖市场形式同样有效（Krahnen & Weber, 1999）。只需付出适度的补贴，自动化做市商也可以承担起支持交易的角色。例如，好莱坞股票交易所（Hollywood Stock Exchange，www.hsx.com）就成功使用自动化做市商来促进对数千部电影及电影明星前景的投机。

早已有人指出，在一维情形下，允许代理人与恰当评分规则进行互动，等价于允许其从一条连续的供需报价曲线中选择交易数量（Savage, 1971）。本文将展示，这种等价关系在更高维度下同样成立。

一种简单的评分规则变体——市场评分规则——的行为类似于一个连续的自动化做市商。任意数量的代理人都可以与其进行任意次数的互动，而总成本并不会超过最后一次互动所产生的成本。

对于任意评分规则 \( s_i(\boldsymbol{r}) \)，代理人应当自愿同意接受如下形式的支付：

对于任意评分规则 \( s_i(\boldsymbol{r}) \)，代理人应当自愿同意接受如下形式的支付：

$$
x_i
=
\Delta s_i(\boldsymbol{r}, \boldsymbol{\rho})
=
s_i(\boldsymbol{r})
-
s_i(\boldsymbol{\rho})
$$

其中 \( \boldsymbol{\rho} \) 可以取任意值。事实上，代理人可以通过令

$$
\boldsymbol{r} = \boldsymbol{\rho}
$$

来确保自身不产生任何影响（即 \( \boldsymbol{x} = \boldsymbol{0} \)）；而当他将

$$
\boldsymbol{r} = \boldsymbol{p} \neq \boldsymbol{\rho}
$$

（均已归一化）时，则期望获得正的（且最大的）利润。因此，如果 \( \boldsymbol{\rho} \) 总是被设定为最近一次提交的报告，那么就可以允许任意数量的代理人与该规则进行任意次数的互动。

具体而言，让代理人依次向市场评分规则提交他们的报告 \( \boldsymbol{r}_t \)。每一次报告所获得的支付为

$$
x_{it}
=
\Delta s_i(\boldsymbol{r}_t, \boldsymbol{r}_{t-1})
$$

其中 \( \boldsymbol{r}_0 \) 是初始参考报告。对 \( T \) 次报告所需支付的总成本为

$$
x_i
=
\sum_{t=1}^{T} x_{it}
=
\sum_{t=1}^{T}
\big(
s_i(\boldsymbol{r}_t)
-
s_i(\boldsymbol{r}_{t-1})
\big)
=
s_i(\boldsymbol{r}_T)
-
s_i(\boldsymbol{r}_0)
$$

该成本仅取决于初始报告与最终报告，因此与只进行一次、但具有相同最终概率值 \( r_i \) 的报告所需成本完全相同。

不仅如此，从 \( \boldsymbol{r}_0 \) 到 \( \boldsymbol{r}_T \) 的整体变动可以在不增加任何额外成本的情况下拆分为若干个从 \( \boldsymbol{r}_{t-1} \) 到 \( \boldsymbol{r}_t \) 的小变动；而每一个小变动又可以被视为沿着随时间连续变化的报告轨迹 \( \boldsymbol{r}(t) \)，对无穷小变动 \( d\boldsymbol{r} \) 的积分。

如果代理人以

$$
q_i = \frac{d r_i}{dt}
$$

的速率改变其报告，则其资产数量变化的速率为

$$
y_i
=
\frac{d x_i}{dt}
=
\sum_j q_j
\frac{\partial s_i(\boldsymbol{r})}{\partial r_j}
$$

当该代理人持有信念 \( \boldsymbol{p} \) 时，其期望收益变化率为

$$
\frac{d}{dt}
\sum_i p_i x_i
=
\sum_i p_i y_i
=
\sum_i p_i
\sum_j q_j
\frac{\partial s_i(\boldsymbol{r})}{\partial r_j}
=
\sum_j q_j
\left(
\sum_i p_i
\frac{\partial s_i(\boldsymbol{r})}{\partial r_j}
\right)
$$

当

$$
\boldsymbol{r} = \boldsymbol{p}
$$

时，根据一阶最优条件（方程 (1)），括号中的最后一项为零。因此，一阶条件实际上是一种局部的“**公平赌注**”（fair bet）条件，即：当代理人改变其报告时，所交换的资产在当前“市场”价格 \( \boldsymbol{r} \) 下是局部公平的（即期望值为零的）赌注。

在这种交易中，代理人支付形式为“**若事件 \( i \) 发生则支付 1**”的资产，以换取其他同类资产。

因此，我们可以将市场评分规则视为一种**基于连续库存的自动化做市商**。这样的做市商在至少对无穷小交易而言具有零买卖价差，其内部状态完全由其资产库存 \( \boldsymbol{x} \) 所描述，并给出瞬时价格

$$
\boldsymbol{p}
=
\boldsymbol{m}(\boldsymbol{x}),
\qquad
\sum_i m_i(\boldsymbol{x}) = 1
$$

也就是说，该做市商将接受任何形式为

$$
d\boldsymbol{x}
=
\boldsymbol{y}\, dt
$$

的无穷小“公平赌注”交易，只要满足

$$
\sum_i y_i\, m_i(\boldsymbol{x}) = 0
\quad (3)
$$

并且也接受任何可以表示为上述无穷小交易积分的有限交易。

任何做市商的核心任务，都是从他人与其交易中所隐含的信息中，推断出新的理性价格（O’Hara, 1997）。在响应无穷小交易时，市场评分规则的“**推断规则**”为

$$
\frac{\partial m_j}{\partial x_i}
$$

它通过以下关系决定公平价格的变化：

$$
\frac{d p_i}{dt}
=
q_i
=
\sum_j y_j
\frac{\partial m_i(\boldsymbol{x})}{\partial x_j}
$$

该推断规则应当满足

$$
\frac{\partial m_i}{\partial x_i} < 0
$$

以补偿交易中预期存在的逆向选择。也就是说，人们的买入行为通常表明做市商给出的价格可能偏低，而卖出行为则表明价格可能偏高。

市场评分规则生成共识估计的方式，与博彩市场生成共识估计的方式是相同的。虽然每个人始终可以自由地改变当前估计，但这样做需要承担越来越多的风险，最终每个人都会达到一个不愿继续调整的极限，至少在获得进一步信息之前是如此。

……这将要求承担越来越多的风险，最终每个人都会达到一个不愿继续调整的界限，至少在获得进一步信息之前是如此。在这一点上，可以认为市场达到了均衡状态。

我们可以将做市商函数 \( \boldsymbol{m}(\boldsymbol{x}) \) 扩展到所有可能的 \( \boldsymbol{x} \)，方法是要求：对于任意实数 \( \alpha \)，都有

$$
\boldsymbol{m}(\boldsymbol{x} + \alpha \boldsymbol{1}) = \boldsymbol{m}(\boldsymbol{x}),
$$

其中

$$
\boldsymbol{1} = \{ 1 \}_i.
$$

这意味着，改变做市商的现金储备并不会改变其价格。该性质与

$$
\sum_i m_i = 1
$$

共同蕴含以下关系：

$$
\sum_i
\frac{\partial m_j}{\partial x_i}
=
0
\quad (4)
$$

以及

$$
\sum_i
\frac{\partial m_i}{\partial x_j}
=
0
\quad (5)
$$

与某一特定恰当评分规则等价的做市商 \( \boldsymbol{m} \)，在满足

$$
\sum_i p_i = 1
$$

的情况下，需满足

$$
\boldsymbol{p}
=
\boldsymbol{m}\!\left(
-
\boldsymbol{s}(\boldsymbol{p})
\right).
$$

负号的出现是因为：代理人的收益，正是做市商的损失。

例如，对数评分规则

$$
s_i = a_i + b \log(p_i)
$$

对应于一个**指数型做市商**：

$$
m_i(\boldsymbol{x})
=
\frac{
\exp\!\left( \frac{-a_i - x_i}{b} \right)
}{
\sum_j
\exp\!\left( \frac{-a_j - x_j}{b} \right)
}
\quad (6)
$$

该做市商由如下微分方程刻画：

$$
\frac{\partial m_j}{\partial x_i}
=
-
\frac{1}{b}
\, m_i
\big( 1_{ij} - m_j \big)
\quad (7)
$$

需要注意的是，市场做市商与评分规则之间的这种等价性，保证了该类做市商不会被利用以获取任意大的利润；作为一个整体，交易者群体所能获得的收益，不会超过他们通过向等价的恰当评分规则提交某个报告 \( \boldsymbol{r} \) 所能获得的收益。

## 市场评分规则的成本（Costs of Market Scoring Rules）

所有与市场评分规则互动的代理人所获得的净资产为

$$
x_i
=
s_i(\boldsymbol{r}_T)
-
s_i(\boldsymbol{r}_0),
$$

其中 \( \boldsymbol{r}_T \) 是最后一次提交的报告，而 \( \boldsymbol{r}_0 \) 是初始参考报告。为评分规则提供资金的委托人（principal），可以通过将初始报告设置为其初始信念

$$
\boldsymbol{r}_0 = \boldsymbol{\pi}
$$

来最小化其期望支付。

在极端情形下，若代理人最终对真实状态 \( i \) 具有确定性信念，则委托人的期望支付为

$$
\sum_i
\pi_i
\,
\Delta s_i(\boldsymbol{1}_i, \boldsymbol{\pi}),
$$

其中

$$
\boldsymbol{1}_i = \{ 1_{ij} \}_j.
$$

对于对数评分规则而言，该最大期望支付等于初始分布 \( \boldsymbol{\pi} \) 的熵：

$$
-
b
\sum_i
\pi_i
\log(\pi_i).
$$

在非极端情形下，如果委托人接受最终报告所给出的概率估计，则其期望支付与初始分布与最终分布之间的熵差成正比。（对于二次评分规则，其最大期望支付为

$$
b
-
b
\sum_i
\pi_i^2
$$

。）

当然，上述成本计算并未考虑以下成本：传播当前价格的通信成本、计算价格与资产变动的计算成本，以及执行交易的实现成本。

可能事件空间 \( i \) 可以构造为 \( N \) 个**基本变量** \( n \) 的组合乘积空间，其中每个变量 \( n \) 具有 \( V_n \) 个可能取值 \( v \)。在这种情况下，总事件数为

$$
I
=
\prod_n
V_n,
$$

且每一个事件都可以表示为

$$
i
=
\{ v_n \}_n,
$$

其中 \( v_n \) 表示基本变量 \( n \) 的某一个特定取值。

代理人可以仅针对基本变量的取值进行报告，即报告 \( r_{nv} \)，并满足

$$
\sum_v r_{nv} = 1.
$$

这些仅基于基本变量的报告，其最大期望成本为

$$
\sum_{n,v}
p_{nv}
\,
\tilde{s}_v(\boldsymbol{1}_v, \boldsymbol{p}_n),
$$

其中 \( p_{nv} \) 表示所有满足 \( v_n = v \) 的事件 \( i \) 的概率 \( p_i \) 之和。对于对数评分规则而言，对所有基本变量取值组合进行概率报告的**完整组合报告**

$$
\boldsymbol{r} = \{ r_i \}_i
$$

其最大期望成本并不超过仅基于基本变量的报告成本，至少在参数 \( b \) 保持不变的情况下是如此。毕竟，完整分布的熵不会超过其各个边缘分布熵之和。

尽管为组合报告提供资金并不会产生直接的额外财务成本，但对价格与资产进行更新的**计算成本**仍然难以界定。此类更新的计算复杂度在最坏情况下可能非常高，甚至劣于多项式时间（即为 NP 完全问题）（Cooper, 1990）。如何设计能够最小化此类计算成本的市场评分规则，仍然是一个悬而未决的开放问题。

## 市场评分规则的模块化（Modularity of Market Scoring Rules）

无论是组合事件还是其他形式的事件，人们可能希望对数量极其庞大的事件集合进行概率估计。因此，一个重要的实际问题在于：**市场评分规则在多大程度上能够帮助人们管理大型事件空间**，并使人们能够在其自认为具有相对专业知识的领域内调整概率估计，同时尽量减少对其他估计产生的非预期、非知情的更改。

这些考量可以形式化为如下问题：**关于某些事件的交易，在多大程度上能够保留关于其他事件的条件独立关系**。条件独立性是管理复杂概率分布的核心工具之一。

对于变量 \( A, B, C \)，若在分布 \( P \) 中满足

$$
P(A_i \mid B_j C_k) = P(A_i \mid B_j)
$$

对所有 \( A \) 的取值 \( A_i \)、\( B \) 的取值 \( B_j \) 以及 \( C \) 的取值 \( C_k \) 都成立，则称在给定 \( B \) 的条件下，变量 \( A \) 与 \( C \) 相互独立，并记作

$$
I(A, B, C).
$$

（其中 \( I(A, B, C) \) 蕴含 \( I(C, B, A) \)。）

人类往往觉得精确陈述概率估计是困难的，但通常能够快速且自信地表达条件独立关系。相比于改变独立性假设，人类也更频繁地调整概率估计。这类独立关系通常决定了一张稀疏的相关事件图，从而极大地降低了所需处理的概率空间维度。人们也常常能够在这样的图结构中定位自己具有相对专业优势的区域（Pearl, 1988；Pennock & Wellman, 2000）。

考虑如下情形：某代理人使用市场评分规则进行交易，并且仅对**在事件 \( B \) 发生条件下事件 \( A \) 的发生概率**进行下注。也就是说，该代理人获得形式为“**若 \( A \) 与 \( B \) 同时发生则支付 1**”的资产，并以形式为“**若 \( B \) 发生且 \( A \) 不发生则支付 1**”的资产作为交换。

回忆定义 \( y_i = \frac{d x_i}{dt} \)。若将事件 \( A \) 与 \( B \) 表述为更精细事件 \( i \) 的集合，则这意味着：

- 对所有 \( i, j \in A \cap B \)，有 \( y_i = y_j \)；
- 对所有 \( i, j \in \overline{A} \cap B \)，有 \( y_i = y_j \)（其中 \( \overline{A} \) 表示 \( A \) 的补集）；
- 对所有 \( i \in \overline{B} \)，有 \( y_i = 0 \)。

一般而言，取决于具体的市场评分规则，此类下注可能会改变任意概率估计 \( p_i \)，从而改变任意事件的概率

$$
p(C) = \sum_{i \in C} p_i.
$$

然而，更理想的情况是：**除了 \( p(A \mid B) \)**（以及当然的 \( p(\overline{A} \mid B) = 1 - p(A \mid B) \)）之外，这种下注应当尽可能少地改变其他概率估计。

换言之，做市商的推断规则应当假设：关于“在 \( B \) 条件下 \( A \) 的新下注”，通常只为其提供关于 **事件 \( A \) 如何依赖于事件 \( B \)** 的新信息，而不应提供关于事件 \( B \) 本身概率的信息，也不应提供关于与 \( A \) 如何依赖于 \( B \) 无关事件的信息。对于这些无关事件，原有的条件独立关系应当被保留。

在这一强意义下，对数市场评分规则具有**局部性（locality）**这一独特性质。

在这一强意义下，对数市场评分规则具有局部性（locality）。考虑二元变量
\( A, B, C \)，其中变量 \( A \) 的取值为 \( A, \overline{A} \)，变量 \( B \) 的取值为
\( B, \overline{B} \)，变量 \( C \) 的取值为 \( C, \overline{C} \)。我们可以证明如下结论
（证明见附录）。

**定理 1**  
在给定 \( B \) 的条件下，对数规则下关于 \( A \) 的下注将保持 \( p(B) \) 不变；并且，
对于任意事件 \( C \)，将保持

$$
p(C \mid AB), \quad
p(C \mid \overline{A}B), \quad
p(C \mid \overline{B})
$$

不变。因此，该规则保持条件独立关系

$$
I(A, B, C)
\quad \text{以及} \quad
I(B, A, C).
$$

当事件数 \( I \ge 3 \) 时，反命题同样成立；即便在弱意义下（即：在给定 \( B \) 的条件下
对 \( A \) 的下注仅要求保持 \( p(B) \) 不变），对数市场评分规则仍然是**唯一的局部规则**。
任何满足该约束的规则，都必须在仅包含两个事件的最简单情形下满足该性质。

在这一最简单的情形中，令

$$
A = \{ j \}, \qquad
B = \{ j, k \},
$$

则仅有 \( dx_j \) 与 \( dx_k \) 为非零，而相应地也仅有 \( dp_j \) 与 \( dp_k \) 应为非零。
可以证明，**只有对数规则**满足这一约束条件。

**定理 2**  
当 \( I \ge 3 \) 时，若对所有 \( i \notin \{ j, k \} \)，由

$$
y_i = 0
$$

蕴含

$$
q_i = 0,
$$

则该评分规则必为对数规则。

因此，对数市场评分规则在具有**局部推断规则**这一性质上是唯一的。当某人在给定
\( B \) 的条件下对 \( A \) 进行下注，从而并未承担关于 \( B \) 是否为真的风险时，所有其
他市场评分规则在某些情况下都会改变其对 \( p(B) \) 的估计。相比之下，对数规则不仅
保持 \( p(B) \) 不变，而且对任意事件 \( C \)，还同时保持

$$
p(C \mid AB), \quad
p(C \mid \overline{A}B), \quad
p(C \mid \overline{B})
$$

不变。

## 结论（Conclusion）

简单评分规则常被用于从个人那里引出概率估计；若需要克服风险厌恶或状态依赖型效
用，也可以采用更复杂的版本。从理论上看，反复引出并公布个人的概率估计，应当
足以诱导形成共同估计；然而在实践中，估计分歧依然存在。

不过在实践中，标准的博彩市场确实能够引出看似有效聚合个体信息的共同估计，尽管
个体参与其中往往显得并不理性，并且需要一定程度的交易协调。

在简单评分规则下，个体为每个事件报告一个概率，并根据该报告以及最终发生的事件
获得支付。市场评分规则是一类评分规则，其中任何人都可以修改当前的官方报告，
并根据新的报告获得支付，只要其愿意按照上一位报告者的报告向其支付报酬。其结
果是：任何人都可以在最近一次报告给出的赔率下，进行任意无穷小的公平赌注，而
无需像传统博彩市场中那样寻找另一位愿意进行匹配下注的交易对手。

因此，市场评分规则结合了简单评分规则与博彩市场的优势：既激励每个个体给出自
己的概率估计，又能够诱导形成群体层面的共同估计。

在实现成本方面，市场评分规则并不比简单评分规则更高。成本确实取决于被征询概
率估计的基本事件数量；但对于对数规则而言，对这些基本事件的所有组合引出概率
估计并不会产生额外成本。

此外，对数规则在从交易中进行推断时具有极强的局部性；在“给定某一事件条件下对
另一事件下注”的情形中，只有对数规则能够保持被给定事件的概率不变。对数规则
的这一性质还使其能够保持其他事件的条件概率，从而维持条件独立关系。

然而，在组合事件空间中更新市场评分规则的**计算成本**可能非常高。如何最好地最
小化并合理分配这些计算成本，仍然是一个有待进一步研究的开放问题。

## 附录（Appendix）

### 定理 1 的证明（Proof of Theorem 1）

对数市场评分规则等价于满足方程 (7) 的指数型做市商。对于在给定 \( B \) 条件下对
\( A \) 的下注，有

$$
y_i = \frac{d x_i}{dt} = 0,
\qquad
\forall i \in \overline{B}.
$$

将这一条件代入，对于 \( i \in \overline{B} \)，可得

$$
\frac{d p_i}{dt}
=
\sum_j y_j
\frac{\partial m_i}{\partial x_j}
=
-
m_i
\sum_j
\frac{y_j 1_{ij}}{b}
+
m_i
\sum_j
\frac{y_j m_j}{b}.
$$

第一项求和为零，是因为 \( y_i = 0 \)；第二项求和根据公平赌注条件（方程 (3)）也为零。
因此，

$$
p(\overline{B})
=
\sum_{i \in \overline{B}} p_i
$$

不会发生变化，进而

$$
p(B) = 1 - p(\overline{B})
$$

同样保持不变。

根据方程 (6)，由资产变动 \( \Delta x_i \) 所导致的价格从旧值 \( p_i \) 向新值
\( p_i' \) 的变化满足

$$
p_i'
=
p_i
\, K
\exp\!\left( -\frac{\Delta x_i}{b} \right),
$$

其中 \( K = K(\Delta \boldsymbol{x}) \) 为归一化因子。因此，

$$
p'(C \mid AB)
=
\frac{
\sum_{i \in A \cap B \cap C}
p_i'
}{
\sum_{i \in A \cap B}
p_i'
}
=
\frac{
\sum_{i \in A \cap B \cap C}
p_i
K
\exp\!\left( -\frac{\Delta x_i}{b} \right)
}{
\sum_{i \in A \cap B}
p_i
K
\exp\!\left( -\frac{\Delta x_i}{b} \right)
}.
$$

由于在集合 \( A \cap B \) 内，\( \Delta x_i \) 处处相同，上式可化简为

$$
p'(C \mid AB)
=
\frac{
\sum_{i \in A \cap B \cap C}
p_i
}{
\sum_{i \in A \cap B}
p_i
}
=
p(C \mid AB).
$$

同理，由于 \( \Delta x_i \) 在集合 \( \overline{A} \cap B \) 以及 \( \overline{B} \) 内也分别
处处相同，可得

$$
p'(C \mid \overline{A}B) = p(C \mid \overline{A}B),
\qquad
p'(C \mid \overline{B}) = p(C \mid \overline{B}).
$$

因此，对数规则对任意事件 \( C \) 都保持

$$
P(C \mid AB), \quad
P(C \mid \overline{A}B), \quad
P(C \mid \overline{B})
$$

不变。

对于二元变量 \( C \)，可以将

$$
P(A \mid BC) = P(A \mid B)
$$

改写为

$$
P(A \mid BC) = P(A \mid B \overline{C}).
$$

在二元变量的情形下，条件独立关系

$$
I(A, B, C)
$$

（等价于 \( I(C, B, A) \)）要求

$$
p(C \mid AB) = p(C \mid \overline{A}B),
\qquad
p(C \mid A \overline{B}) = p(C \mid \overline{A}\overline{B}),
$$

并且对 \( \overline{C} \) 也满足相同形式的等式。

对数规则通过分别保持这些等式左右两边，从而保持上述关系。例如，对数规则保持

$$
p(C \mid AB) = p(C \mid \overline{A}B),
$$

因为它分别保持等式的左右两侧；同样地，它也保持

$$
p(C \mid A \overline{B}) = p(C \mid \overline{A}\overline{B}),
$$

这是因为，例如

$$
p(C \mid A \overline{B})
=
\frac{p(CA \mid \overline{B})}{p(A \mid \overline{B})},
$$

而该式中的分子与分母均属于 \( p(D \mid \overline{B}) \) 这一形式，而这一形式在对数规
则下是被保持的。

条件独立关系

$$
I(B, A, C)
$$

（等价于 \( I(C, A, B) \)）要求

$$
p(C \mid AB) = p(C \mid A \overline{B}),
\qquad
p(C \mid \overline{A}B) = p(C \mid \overline{A}\overline{B}),
$$

并且对 \( \overline{C} \) 也满足类似关系。而上述所有形式在对数规则下同样都被保持。
证毕（QED）。

---

### 定理 2 的证明（Proof of Theorem 2）

令事件 \( j, k \) 分别为 \( 1, 2 \)。由于假设

$$
y_i = 0,
\qquad
\forall i \notin \{1, 2\},
$$

公平赌注条件（方程 (3)）要求

$$
\sum_i y_i m_i
=
y_1 m_1 + y_2 m_2
=
0.
$$

根据假设，在该条件成立时，对所有 \( i \notin \{1, 2\} \)，必须有

$$
0
=
q_i
=
y_1
\frac{\partial m_i}{\partial x_1}
+
y_2
\frac{\partial m_i}{\partial x_2}.
$$

将上述条件合并，可得

$$
\frac{1}{m_1}
\frac{\partial m_i}{\partial x_1}
=
\frac{1}{m_2}
\frac{\partial m_i}{\partial x_2}.
$$

由于我们对 \( 1, 2 \) 的选择是任意的，可以将该比值记为

$$
h_i(\boldsymbol{x}).
$$

因此，对所有 \( i \neq j \)，有

$$
\frac{\partial m_i}{\partial x_j}
=
m_j
h_i.
$$

对于 \( i = j \)，引入残差函数 \( \mu_i(\boldsymbol{x}) \)，定义为

$$
\frac{\partial m_i}{\partial x_i}
=
h_i m_i
+
m_i \mu_i(\boldsymbol{x}).
$$

将上述两个表达式代入方程 (4)，可得

$$
h_j
=
-
\mu_i m_j,
$$

从而推出

$$
\mu_i = \mu,
$$

即该量与 \( i \) 无关。

因此，对所有 \( i, j \)，有

$$
\frac{\partial m_j}{\partial x_i}
=
\mu
\, m_i
(1_{ij} - m_j).
\quad (8)
$$

若 \( \mu \) 是常数函数，则该式与刻画对数规则的微分方程 (7) 完全一致，从而定理得
证。下面我们证明 \( \mu \) 的确为常数。

将方程 (8) 代入恒等式

$$
\frac{\partial^2 m_j}{\partial x_k \partial x_i}
=
\frac{\partial^2 m_j}{\partial x_i \partial x_k},
\quad (9)
$$

该恒等式对任意函数 \( \boldsymbol{m} \) 都必须成立。考虑 \( i \neq j \neq k \) 的情形，可得

$$
\frac{\partial \mu}{\partial x_k}
\frac{1}{m_k}
=
\frac{\partial \mu}{\partial x_i}
\frac{1}{m_i},
$$

这蕴含

$$
\frac{\partial \mu}{\partial x_i}
=
m_i \eta
$$

其中 \( \eta = \eta(\boldsymbol{x}) \) 为某个函数。

再将方程 (8) 代入方程 (9)，并对 \( j, k \) 求和，可得

$$
\sum_k
\frac{\partial \mu}{\partial x_k}
=
0.
$$

综合上述结论可推出

$$
\eta = 0,
$$

从而 \( \mu \) 为常数。证毕（QED）。

Aumann, R. (1976). Agreeing to Disagree.
简介：提出“共同先验+共同知识”下理性人最终不能持续分歧的经典结果（Aumann agreement theorem）。
Link: https://scholar.google.com/scholar?q=Aumann+1976+Agreeing+to+Disagree

Berg, Nelson, & Rietz (2001). Accuracy and Forecast Standard Error of Prediction Markets.
简介：用 Iowa Electronic Markets 等数据评估预测市场的预测精度与误差标准。
Link: https://scholar.google.com/scholar?q=Berg+Nelson+Rietz+2001+Accuracy+and+Forecast+Standard+Error+of+Prediction+Markets

Brier, G. W. (1950). Verification of Forecasts Expressed in Terms of Probability.
简介：提出/系统化 Brier score（二次评分）用于概率预测的检验。
Link: https://scholar.google.com/scholar?q=Brier+1950+Verification+of+Forecasts+Expressed+in+Terms+of+Probability

Clemen, R. T. (2002). Incentive Contracts and Strictly Proper Scoring Rules.
简介：讨论严格恰当评分规则如何用于激励契约设计。
Link: https://scholar.google.com/scholar?q=Clemen+2002+Incentive+Contracts+and+Strictly+Proper+Scoring+Rules

Cooper, G. F. (1990). The computational complexity of probabilistic inference using Bayes belief networks.
简介：证明贝叶斯网络概率推断在一般情形下计算复杂度很高（与 NP 完全性相关）。
Link: https://scholar.google.com/scholar?q=Cooper+1990+computational+complexity+probabilistic+inference+Bayes+belief+networks

Cowen, T., & Hanson, R. (2002). Are Disagreements Honest?
简介：讨论现实中分歧是否来自信息/偏好差异还是策略性行为（与“为什么不收敛”有关）。
Link: https://scholar.google.com/scholar?q=Cowen+Hanson+2002+Are+Disagreements+Honest

DeWispelare, Herren, & Clemen (1995). The use of probability elicitation in the high-level nuclear waste regulation program.
简介：核废料监管场景中，如何做概率引出与风险评估的实务案例。
Link: https://scholar.google.com/scholar?q=DeWispelare+Herren+Clemen+1995+probability+elicitation+nuclear+waste+regulation

Druzdzel & van der Gaag (1995). Elicitation of Probabilities for Belief Networks: Combining Qualitative and Quantitative Information.
简介：在贝叶斯信念网络中结合定性结构与定量概率的引出方法。
Link: https://scholar.google.com/scholar?q=Druzdzel+van+der+Gaag+1995+Elicitation+of+Probabilities+for+Belief+Networks

Geanakoplos & Polemarchakis (1982). We Can’t Disagree Forever.
简介：与 Aumann 收敛思想相关，讨论在信息交流下分歧终将消失的条件。
Link: https://scholar.google.com/scholar?q=Geanakoplos+Polemarchakis+1982+We+Can%27t+Disagree+Forever

Genest & Zidek (1986). Combining Probability Distributions: A Critique and an Annotated Bibliography.
简介：概率分布合成（opinion pooling）的批判综述+注释书目。
Link: https://scholar.google.com/scholar?q=Genest+Zidek+1986+Combining+Probability+Distributions+A+Critique+and+an+Annotated+Bibliography

Good, I. J. (1952). Rational Decisions.
简介：早期把对数评分/对数似然与“理性决策”联系起来的经典文献之一。
Link: https://scholar.google.com/scholar?q=Good+1952+Rational+Decisions+JRSS+B

Hanson, R. (2002a). Disagreement is Unpredictable.
简介：讨论在某些条件下“分歧方向不可预测”的结论，与信息聚合/收敛相对照。
Link: https://scholar.google.com/scholar?q=Hanson+2002+Disagreement+is+Unpredictable

Hanson, R. (2002b). Eliciting Objective Probabilities via Lottery Insurance Games.
简介：Hanson 提出的用“彩票保险博弈”引出客观概率的技术报告。
Link: https://scholar.google.com/scholar?q=Hanson+2002+Eliciting+Objective+Probabilities+via+Lottery+Insurance+Games

Hanson, R. D. (1997). Four Puzzles in Information and Politics... (Ph.D. thesis).
简介：Hanson 博士论文，信息与政治经济中的若干悖论/机制问题源头之一。
Link: https://scholar.google.com/scholar?q=Hanson+1997+Four+Puzzles+in+Information+and+Politics+Product+Bans+Informed+Voters

Hausch, Lo, & Ziemba (1994). Efficiency of Racetrack Betting Markets.
简介：赛马博彩市场效率与定价偏差的系统研究/专著。
Link: https://scholar.google.com/scholar?q=Hausch+Lo+Ziemba+1994+Efficiency+of+Racetrack+Betting+Markets

Jaffray & Karni (1999). Elicitation of Subjective Probabilities When the Initial Endowment is Unobservable.
简介：当初始禀赋不可观测时，主观概率引出的识别与机制设计问题。
Link: https://scholar.google.com/scholar?q=Jaffray+Karni+1999+Elicitation+of+Subjective+Probabilities+When+the+Initial+Endowment+is+Unobservable

Kadane & Winkler (1988). Separating Probability Elicitation From Utilities.
简介：经典难点：概率与效用纠缠，如何分离引出；你论文引言第一句就在引用它。
Link: https://scholar.google.com/scholar?q=Kadane+Winkler+1988+Separating+Probability+Elicitation+From+Utilities

Kalai & Lehrer (1993). Rational learning leads to Nash equilibrium.
简介：学习与信息更新过程如何导致纳什均衡，支撑“反复评分支付→均衡”的论证。
Link: https://scholar.google.com/scholar?q=Kalai+Lehrer+1993+Rational+learning+leads+to+Nash+equilibrium

Krahnen & Weber (1999). Does information aggregation depend on market structure? Market makers vs. double auction.
简介：比较做市商机制与双向拍卖在信息聚合上的表现。
Link: https://scholar.google.com/scholar?q=Krahnen+Weber+1999+market+makers+vs+double+auction+information+aggregation

Lo, A. W. (1997). Market efficiency: Stock market behaviour in theory and practice.
简介：市场有效性与行为金融的综述/专著背景，用来说明“市场能聚合信息但不完美”。
Link: https://scholar.google.com/scholar?q=Lo+1997+Market+efficiency+Stock+market+behaviour+in+theory+and+practice

Monderer & Samet (1989). Approximating Common Knowledge with Common Beliefs.
简介：用“共同信念”近似“共同知识”，是你引言里那段收敛论证的关键引用。
Link: https://scholar.google.com/scholar?q=Monderer+Samet+1989+Approximating+Common+Knowledge+with+Common+Beliefs

Murphy & Winkler (1984). Probability Forecasting in Meteorology.
简介：气象概率预测的经典实证/方法论文，说明评分规则在实践中可用。
Link: https://scholar.google.com/scholar?q=Murphy+Winkler+1984+Probability+Forecasting+in+Meteorology

O’Carroll (1977). Subjective Probabilities and Short-Term Economic Forecasts.
简介：经济短期预测中主观概率引出与检验的早期实证研究。
Link: https://scholar.google.com/scholar?q=O%27Carroll+1977+Subjective+Probabilities+and+Short-Term+Economic+Forecasts

O’Hara, M. (1997). Market Microstructure Theory.
简介：市场微观结构权威教材，解释做市商、报价、逆向选择等概念背景。
Link: https://scholar.google.com/scholar?q=O%27Hara+1997+Market+Microstructure+Theory

Pearl, J. (1988). Probabilistic Reasoning in Intelligent Systems.
简介：贝叶斯网络与条件独立图模型的奠基教材，你论文“条件独立/稀疏图”引用它。
Link: https://scholar.google.com/scholar?q=Pearl+1988+Probabilistic+Reasoning+in+Intelligent+Systems

Pennock, Giles, & Nielsen (2001). The Real Power of Artificial Markets.
简介：人工/预测市场在信息聚合与预测上的能力分析（Science）。
Link: https://scholar.google.com/scholar?q=Pennock+Giles+Nielsen+2001+The+Real+Power+of+Artificial+Markets

Pennock & Wellman (2000). Compact Securities Markets for Pareto Optimal Reallocation of Risk.
简介：用更紧凑的证券集合实现风险帕累托最优再分配，和“组合事件空间”强相关。
Link: https://scholar.google.com/scholar?q=Pennock+Wellman+2000+Compact+Securities+Markets+for+Pareto+Optimal+Reallocation+of+Risk

Plott (2000). Markets as Information Gathering Tools.
简介：把市场视为“信息收集工具”，常用来论证内部预测市场有效。
Link: https://scholar.google.com/scholar?q=Plott+2000+Markets+as+Information+Gathering+Tools

Roll (1984). Orange Juice and Weather.
简介：经典例子：期货价格能反映天气信息，甚至优于官方预报。
Link: https://scholar.google.com/scholar?q=Roll+1984+Orange+Juice+and+Weather

Savage (1971). Elicitation of Personal Probabilities and Expectations.
简介：评分规则/个人概率引出早期核心论文，很多一维等价性论证都源自这里。
Link: https://scholar.google.com/scholar?q=Savage+1971+Elicitation+of+Personal+Probabilities+and+Expectations

Selten (1998). Axiomatic Characterization of the Quadratic Scoring Rule.
简介：从公理化角度刻画二次评分规则（Brier score）的性质。
Link: https://scholar.google.com/scholar?q=Selten+1998+Axiomatic+Characterization+of+the+Quadratic+Scoring+Rule

von Holstein (1970). Measurement of Subjective Probability.
简介：主观概率测量与对数规则性质相关的经典心理学/决策理论文献。
Link: https://scholar.google.com/scholar?q=von+Holstein+1970+Measurement+of+Subjective+Probability

Williamson, Crowell, & Trotter (1972). Calculus of Vector Functions (3rd ed.).
简介：向量微积分教材，被引用来支撑“梯度场/混合偏导相等”等数学步骤。
Link: https://scholar.google.com/scholar?q=Williamson+Crowell+Trotter+1972+Calculus+of+Vector+Functions

Winkler (1969). Scoring Rules and the Evaluation of Probability Assessors.
简介：评分规则用于评估预测者的经典论文，和对数似然评估关系紧密。
Link: https://scholar.google.com/scholar?q=Winkler+1969+Scoring+Rules+and+the+Evaluation+of+Probability+Assessors