```tsx
// ✅ 1) 先把这两个 import 补上（你现在代码里缺）
// 在文件顶部 import 区域加入：
import { motion, AnimatePresence } from "framer-motion";
```

下面给你 3 个组件 + 最小接入改动。你直接复制粘贴即可跑（静态数据先写死，后面再接链/后端）。

---

## A) ResolveRulesCard（首屏规则卡，放在 Video 下面）

```tsx
type ResolveStatus = "募集中" | "进行中" | "待裁决" | "争议中" | "已结算";

function fmtAddr(addr: string) {
  if (!addr) return "-";
  return addr.length <= 12 ? addr : `${addr.slice(0, 6)}…${addr.slice(-4)}`;
}

function ResolveRulesCard({
  status,
  resolveAt,
  disputeHours,
  resolverLabel,
  resolverAddr,
  payoutYes = "YES=$1",
  payoutNo = "NO=$0",
  rulesShort,
  onViewRules,
}: {
  status: ResolveStatus;
  resolveAt: string; // ISO string or display string
  disputeHours: number;
  resolverLabel: string; // e.g. "Resolver Multisig (3/5)"
  resolverAddr: string; // address
  payoutYes?: string;
  payoutNo?: string;
  rulesShort: string; // 1-2 lines
  onViewRules?: () => void;
}) {
  return (
    <Card className="border-slate-200 bg-white">
      <CardHeader className="pb-3">
        <div className="flex items-start justify-between gap-3">
          <div>
            <CardTitle className="text-base">结算与裁决规则</CardTitle>
            <CardDescription>多签裁决（带争议期），Demo 先静态展示，后续可接链上 Resolver</CardDescription>
          </div>
          <Badge className="bg-slate-900 hover:bg-slate-900">{status}</Badge>
        </div>
      </CardHeader>

      <CardContent className="space-y-3">
        <div className="rounded-2xl border bg-slate-50 p-3 text-sm">
          <div className="text-muted-foreground">目标</div>
          <div className="mt-1 font-medium text-slate-900">{rulesShort}</div>
        </div>

        <div className="grid grid-cols-1 gap-3 md:grid-cols-3">
          <div className="rounded-2xl border p-3">
            <div className="text-xs text-muted-foreground">结算时间</div>
            <div className="mt-1 text-sm font-semibold text-slate-900">{resolveAt}</div>
          </div>
          <div className="rounded-2xl border p-3">
            <div className="text-xs text-muted-foreground">争议期</div>
            <div className="mt-1 text-sm font-semibold text-slate-900">{disputeHours}h</div>
          </div>
          <div className="rounded-2xl border p-3">
            <div className="text-xs text-muted-foreground">赔付规则</div>
            <div className="mt-1 text-sm font-semibold text-slate-900">
              {payoutYes} / {payoutNo}
            </div>
          </div>
        </div>

        <div className="flex flex-wrap items-center justify-between gap-2 rounded-2xl border p-3">
          <div className="min-w-0">
            <div className="text-xs text-muted-foreground">裁决人</div>
            <div className="mt-1 truncate text-sm font-semibold text-slate-900">
              {resolverLabel} · {fmtAddr(resolverAddr)}
            </div>
          </div>
          <Button variant="outline" className="h-9" onClick={onViewRules}>
            查看完整规则
          </Button>
        </div>

        <div className="text-[11px] text-muted-foreground">
          提示：在争议期内可提交反证。争议结束后由多签最终确认结果并结算。
        </div>
      </CardContent>
    </Card>
  );
}
```

---

## B) ResolveRiskCard（右侧替换 Bonding Curve）

```tsx
function calcMaxLoss(amountUsd: string) {
  const n = Number(amountUsd || 0);
  if (!Number.isFinite(n) || n <= 0) return 0;
  return n;
}

function ResolveRiskCard({
  status,
  resolverLabel,
  resolverAddr,
  resolveAt,
  disputeEndsAt,
  tradeAmountUsd,
  pick,
  mode,
  onSubmitEvidence,
  onSubmitDispute,
}: {
  status: ResolveStatus;
  resolverLabel: string;
  resolverAddr: string;
  resolveAt: string;
  disputeEndsAt: string;
  tradeAmountUsd: string;
  pick: "yes" | "no";
  mode: "buy" | "sell";
  onSubmitEvidence?: () => void;
  onSubmitDispute?: () => void;
}) {
  const maxLoss = calcMaxLoss(tradeAmountUsd);

  return (
    <Card>
      <CardHeader className="pb-3">
        <div className="flex items-start justify-between gap-2">
          <div>
            <CardTitle className="text-base">Resolve & Risk</CardTitle>
            <CardDescription>结算状态、裁决人、风险提示（右侧必须常驻）</CardDescription>
          </div>
          <Badge variant="secondary">{status}</Badge>
        </div>
      </CardHeader>

      <CardContent className="space-y-3">
        <div className="rounded-2xl border bg-slate-50 p-3 text-sm">
          <div className="flex items-center justify-between">
            <span className="text-muted-foreground">当前下单</span>
            <span className="font-medium text-slate-900">
              {mode.toUpperCase()} {pick.toUpperCase()}
            </span>
          </div>
          <div className="mt-2 flex items-center justify-between">
            <span className="text-muted-foreground">最大亏损</span>
            <span className="text-lg font-semibold text-slate-900">${maxLoss.toFixed(2)}</span>
          </div>
          <div className="mt-1 text-[11px] text-muted-foreground">最大亏损 = 你输入的金额（Demo 默认提示）</div>
        </div>

        <div className="rounded-2xl border p-3 text-sm">
          <div className="text-xs text-muted-foreground">裁决人</div>
          <div className="mt-1 font-semibold text-slate-900">
            {resolverLabel} · {fmtAddr(resolverAddr)}
          </div>
          <div className="mt-2 grid grid-cols-1 gap-2 text-xs text-muted-foreground">
            <div className="flex items-center justify-between">
              <span>结算时间</span>
              <span className="text-slate-900">{resolveAt}</span>
            </div>
            <div className="flex items-center justify-between">
              <span>争议截止</span>
              <span className="text-slate-900">{disputeEndsAt}</span>
            </div>
          </div>
        </div>

        <div className="grid grid-cols-2 gap-2">
          <Button variant="outline" className="h-10" onClick={onSubmitEvidence}>
            提交证据
          </Button>
          <Button variant="outline" className="h-10" onClick={onSubmitDispute}>
            提交反证
          </Button>
        </div>

        <div className="text-[11px] text-muted-foreground">
          说明：证据与反证会进入 Evidence Feed，并在争议期内供多签裁决参考。
        </div>
      </CardContent>
    </Card>
  );
}
```

---

## C) StageInfoPanelV2（把你的 StageInfoPanel 替换掉）

你原来的 StageInfoPanel 里是占位块。换成这个：带**判定条件/证据要求/证据列表/状态**。

```tsx
type EvidenceItem = {
  id: string;
  label: string;
  href?: string;
  type: "github" | "video" | "tx" | "doc" | "image" | "other";
  timeAgo: string;
};

type StageStatus = "未提交" | "已提交" | "已通过" | "被驳回";

type EventMarketV2 = EventMarket & {
  criteria: string[]; // 判定条件（<=3）
  evidenceReq: string[]; // 证据要求（<=3）
  status: StageStatus;
  evidences: EvidenceItem[];
  lastUpdated: string; // "2h ago"
};

function EvidenceChip({ e }: { e: EvidenceItem }) {
  return (
    <Button variant="outline" className="h-8 justify-start gap-2" asChild={!!e.href}>
      {e.href ? (
        <a href={e.href} target="_blank" rel="noreferrer">
          <span className="text-xs">{e.type.toUpperCase()}</span>
          <span className="text-xs text-muted-foreground">{e.label}</span>
          <span className="ml-auto text-[11px] text-muted-foreground">{e.timeAgo}</span>
        </a>
      ) : (
        <div className="w-full">
          <span className="text-xs">{e.type.toUpperCase()}</span>
          <span className="ml-2 text-xs text-muted-foreground">{e.label}</span>
          <span className="ml-auto text-[11px] text-muted-foreground">{e.timeAgo}</span>
        </div>
      )}
    </Button>
  );
}

function StageInfoPanelV2({
  market,
  onClose,
  onSubmitEvidence,
}: {
  market: EventMarketV2;
  onClose: () => void;
  onSubmitEvidence?: (stageId: string) => void;
}) {
  return (
    <motion.div
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: 10 }}
      transition={{ duration: 0.18 }}
      className="mt-3 rounded-2xl border bg-white p-4"
    >
      <div className="flex items-start justify-between gap-3">
        <div className="min-w-0">
          <div className="flex items-center gap-3">
            <StageBadge code={market.key} />
            <div className="min-w-0">
              <div className="truncate text-base font-semibold text-slate-900">{market.title}</div>
              <div className="mt-0.5 line-clamp-2 text-xs text-muted-foreground">{market.desc}</div>
              <div className="mt-2 flex flex-wrap items-center gap-2">
                <Badge variant="secondary">状态：{market.status}</Badge>
                <span className="text-xs text-muted-foreground">更新：{market.lastUpdated}</span>
              </div>
            </div>
          </div>
        </div>

        <div className="flex shrink-0 items-center gap-2">
          <Button variant="outline" className="h-9" onClick={() => onSubmitEvidence?.(market.id)}>
            提交证据
          </Button>
          <Button variant="outline" className="h-9" onClick={onClose}>
            收起
          </Button>
        </div>
      </div>

      <div className="mt-4 grid grid-cols-1 gap-3 md:grid-cols-3">
        <div className="rounded-2xl border bg-slate-50 p-3">
          <div className="text-xs text-muted-foreground">判定条件</div>
          <ul className="mt-2 list-disc space-y-1 pl-4 text-sm text-slate-900">
            {market.criteria.map((c, i) => (
              <li key={i} className="leading-relaxed">
                {c}
              </li>
            ))}
          </ul>
        </div>

        <div className="rounded-2xl border bg-slate-50 p-3">
          <div className="text-xs text-muted-foreground">证据要求</div>
          <ul className="mt-2 list-disc space-y-1 pl-4 text-sm text-slate-900">
            {market.evidenceReq.map((c, i) => (
              <li key={i} className="leading-relaxed">
                {c}
              </li>
            ))}
          </ul>
        </div>

        <div className="rounded-2xl border bg-slate-50 p-3">
          <div className="text-xs text-muted-foreground">证据列表</div>
          <div className="mt-2 space-y-2">
            {market.evidences.length ? (
              market.evidences.map((e) => <EvidenceChip key={e.id} e={e} />)
            ) : (
              <div className="rounded-xl border bg-white p-3 text-xs text-muted-foreground">暂无证据</div>
            )}
          </div>
        </div>
      </div>
    </motion.div>
  );
}
```

---

## D) EvidenceFeed（Thread 之前加一个证据流）

```tsx
type EvidenceLog = {
  id: string;
  kind: "evidence" | "dispute" | "resolver" | "settle";
  title: string;
  by: string;
  timeAgo: string;
  links?: { label: string; href: string }[];
};

function EvidenceFeed({ logs }: { logs: EvidenceLog[] }) {
  return (
    <Card>
      <CardHeader className="pb-3">
        <div className="flex items-center justify-between">
          <div>
            <CardTitle className="text-base">Evidence Feed</CardTitle>
            <CardDescription>证据与裁决过程（可审计的核心）</CardDescription>
          </div>
          <Badge variant="secondary">{logs.length} items</Badge>
        </div>
      </CardHeader>
      <CardContent className="space-y-3">
        {logs.map((l) => (
          <div key={l.id} className="rounded-2xl border p-3">
            <div className="flex items-start justify-between gap-2">
              <div className="min-w-0">
                <div className="text-sm font-semibold text-slate-900">{l.title}</div>
                <div className="mt-1 text-xs text-muted-foreground">
                  {l.kind.toUpperCase()} · by {l.by} · {l.timeAgo}
                </div>
              </div>
              <Badge variant="secondary">{l.kind}</Badge>
            </div>

            {l.links?.length ? (
              <div className="mt-2 flex flex-wrap gap-2">
                {l.links.map((x, idx) => (
                  <Button key={idx} variant="outline" className="h-8" asChild>
                    <a href={x.href} target="_blank" rel="noreferrer">
                      {x.label}
                    </a>
                  </Button>
                ))}
              </div>
            ) : null}
          </div>
        ))}
      </CardContent>
    </Card>
  );
}
```

---

## E) 你要改 ProjectDetail 的最小接入（按顺序贴）

### 1) 把 markets 数据升级成 EventMarketV2（先只改一部分字段）

把你 `const markets: EventMarket[] = [...]` 改成：

```tsx
const markets: EventMarketV2[] = [
  {
    id: "hackathon",
    title: "Hackathon",
    key: "hackathon",
    desc: "是否在公开平台/黑客松拿到里程碑或广泛曝光",
    newP: 0.36,
    deltaPct: -36.0,
    volume24h: 9700,
    trades: 15,
    traders: 0,
    b: 68.37,

    status: "未提交",
    lastUpdated: "2h ago",
    criteria: ["在公开平台/黑客松获得展示或奖项", "可被外部链接验证（官方页面/推文/名单）"],
    evidenceReq: ["官方页面链接或截图哈希", "对应的提交人/项目名可对上"],
    evidences: [
      { id: "e1", type: "doc", label: "Hackathon page", href: "#", timeAgo: "—" },
    ],
  },
  // 其余几个照抄，换不同 criteria/evidenceReq
];
```

### 2) 在 VideoShowcase 下面插入规则卡

在你左侧 column（ProjectHeader、VideoShowcase 下面）加：

```tsx
<ResolveRulesCard
  status="进行中"
  resolveAt="2026-02-20 12:00 UTC"
  disputeHours={24}
  resolverLabel="Resolver Multisig (3/5)"
  resolverAddr="0xResolverMultisigAddress"
  payoutYes="YES=$1"
  payoutNo="NO=$0"
  rulesShort="30 天内是否达成项目成功（证据驱动里程碑裁决）"
  onViewRules={() => alert("TODO: open rules modal")}
/>
```

### 3) Milestones 的详情面板替换成 StageInfoPanelV2

在 `EventMarketsSection` 里，把原来的：

```tsx
{isOpen ? <StageInfoPanel ... /> : null}
```

改成：

```tsx
{isOpen ? (
  <StageInfoPanelV2
    key={m.id + "_panel"}
    market={m as EventMarketV2}
    onClose={() => onToggle(m.id)}
    onSubmitEvidence={(stageId) => alert("TODO submit evidence for " + stageId)}
  />
) : null}
```

（并确保 `EventMarketsSection` 的 markets 类型用 `EventMarketV2[]`）

### 4) Thread 之前加 EvidenceFeed

在 Thread 组件渲染前插入：

```tsx
const evidenceLogs: EvidenceLog[] = [
  { id: "l1", kind: "evidence", title: "提交证据：Demo 链接", by: "User 9C…80bc", timeAgo: "10m ago", links: [{ label: "Demo", href: "#" }] },
  { id: "l2", kind: "resolver", title: "多签签名进度：2/5", by: "Resolver", timeAgo: "5m ago" },
];

<EvidenceFeed logs={evidenceLogs} />
```

### 5) 右侧把 Bonding Curve 卡替换为 ResolveRiskCard

把这段整个删掉：

```tsx
<InfoCard title="Bonding Curve Progress">...</InfoCard>
```

换成：

```tsx
<ResolveRiskCard
  status="进行中"
  resolverLabel="Resolver Multisig (3/5)"
  resolverAddr="0xResolverMultisigAddress"
  resolveAt="2026-02-20 12:00 UTC"
  disputeEndsAt="2026-02-21 12:00 UTC"
  tradeAmountUsd={tradeAmountUsd}
  pick={tradePick}
  mode={tradeMode}
  onSubmitEvidence={() => alert("TODO submit evidence")}
  onSubmitDispute={() => alert("TODO submit dispute")}
/>
```

---

## F) 你还没做但我强烈建议立刻加的交互（不加也能跑）

当用户点击左侧 Milestone 行的 “Buy Yes/No”，右侧面板应该：

* 自动切换到 BUY
* 自动选中 YES/NO
* 自动把 `selectedStageId` 对齐

你已经做了 `setSelectedStageId + setTradePick`，再补一行：

```tsx
setTradeMode("buy");
```

---

你先把这些贴进你的页面跑起来。跑通后你发我：

1. 你想用的 resolver 多签地址（先随便也行）
2. 你希望“成功=哪些证据”（全局 1 条 or 每个 milestone 不同）

我再把“提交证据/反证”做成真正的 Modal（带 link、hash、截图、tx 输入），并把 EvidenceFeed 和 StageInfoPanel 的证据数据打通。
